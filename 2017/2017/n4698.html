<!DOCTYPE html>
<!-- Sources at https://github.com/cplusplus/parallelism-ts -->
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><!--[if lte IE 8]><script>document.createElement("nav");document.createElement("section");document.createElement("time");document.createElement("CXX-TITLEPAGE");document.createElement("CXX-DOCNUM");document.createElement("CXX-REVISES");document.createElement("CXX-EDITOR");document.createElement("CXX-EMAIL");document.createElement("CXX-TOC");document.createElement("CXX-CLAUSE");document.createElement("CXX-FOOTNOTE");document.createElement("CXX-FOREIGN-INDEX");document.createElement("CXX-REF");document.createElement("CXX-NOTE");document.createElement("CXX-EXAMPLE");document.createElement("CXX-SECTION");document.createElement("CXX-FUNCTION");document.createElement("CXX-SIGNATURE");document.createElement("CXX-EFFECTS");document.createElement("CXX-REMARKS");document.createElement("CXX-RETURNS");document.createElement("CXX-REQUIRES");document.createElement("CXX-COMPLEXITY");document.createElement("CXX-NOTES");document.createElement("CXX-PRECONDITIONS");document.createElement("CXX-THROWS");document.createElement("CXX-POSTCONDITIONS");document.createElement("CXX-PUBLISH-BUTTON");</script><![endif]--><style>template {display: none !important;} /* injected by platform.js */</style><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><style shim-shadowdom-css="">style { display: none !important; }
cxx-function {
	display: block; page-break-inside: avoid;
}

cxx-function:not(:last-child) {
	margin-bottom: 3ex;
}

cxx-function > dl {
	margin: 0px 0px 0px 2em;
}

cxx-function > pre {
	margin: 0px;
}cxx-signature {
	padding-left: 2em; display: block; text-indent: -2em;
}

cxx-signature.formatted {
	text-indent: 0px;
}cxx-attribute {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-attribute dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-attribute dd {
	margin-left: 0em;
}

cxx-attribute dd > ul, cxx-attribute dd > ol {
	clear: left;
}cxx-requires {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-requires dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-requires dd {
	margin-left: 0em;
}

cxx-requires dd > ul, cxx-requires dd > ol {
	clear: left;
}cxx-preconditions {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-preconditions dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-preconditions dd {
	margin-left: 0em;
}

cxx-preconditions dd > ul, cxx-preconditions dd > ol {
	clear: left;
}cxx-effects {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-effects dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-effects dd {
	margin-left: 0em;
}

cxx-effects dd > ul, cxx-effects dd > ol {
	clear: left;
}cxx-synchronization {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-synchronization dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-synchronization dd {
	margin-left: 0em;
}

cxx-synchronization dd > ul, cxx-synchronization dd > ol {
	clear: left;
}cxx-postconditions {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-postconditions dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-postconditions dd {
	margin-left: 0em;
}

cxx-postconditions dd > ul, cxx-postconditions dd > ol {
	clear: left;
}cxx-returns {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-returns dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-returns dd {
	margin-left: 0em;
}

cxx-returns dd > ul, cxx-returns dd > ol {
	clear: left;
}cxx-throws {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-throws dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-throws dd {
	margin-left: 0em;
}

cxx-throws dd > ul, cxx-throws dd > ol {
	clear: left;
}cxx-complexity {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-complexity dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-complexity dd {
	margin-left: 0em;
}

cxx-complexity dd > ul, cxx-complexity dd > ol {
	clear: left;
}cxx-exception-safety {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-exception-safety dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-exception-safety dd {
	margin-left: 0em;
}

cxx-exception-safety dd > ul, cxx-exception-safety dd > ol {
	clear: left;
}cxx-remarks {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-remarks dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-remarks dd {
	margin-left: 0em;
}

cxx-remarks dd > ul, cxx-remarks dd > ol {
	clear: left;
}cxx-error-conditions {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-error-conditions dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-error-conditions dd {
	margin-left: 0em;
}

cxx-error-conditions dd > ul, cxx-error-conditions dd > ol {
	clear: left;
}cxx-notes {
	display: block; margin-top: 0.5em; margin-bottom: 0.5em;
}

cxx-notes dt {
	float: left; font-style: italic; font-weight: normal; padding-right: 1ex;
}

cxx-notes dd {
	margin-left: 0em;
}

cxx-notes dd > ul, cxx-notes dd > ol {
	clear: left;
}cxx-section {
	display: block;
}

cxx-section:target {
	background-color: inherit;
}

cxx-section:target > section > h1 {
	background-color: rgb(255, 238, 221);
}

cxx-section header > h1 {
	display: inline; font-size: 100%;
}

cxx-section header {
	font-weight: bold; margin-top: 20px; margin-bottom: 20px; page-break-inside: avoid; page-break-after: avoid;
}

cxx-section header::after {
	clear: both; display: block; content: " "; height: 0px;
}cxx-clause {
	display: block;
}

cxx-clause:target {
	background-color: inherit;
}

cxx-clause:target > section > h1 {
	background-color: rgb(255, 238, 221);
}

cxx-clause header > h1 {
	display: inline; font-size: 100%;
}

cxx-clause header {
	font-weight: bold; margin-top: 20px; margin-bottom: 20px; page-break-inside: avoid; page-break-after: avoid;
}

cxx-clause header::after {
	clear: both; display: block; content: " "; height: 0px;
}[is=cxx-table] {
	margin-left: auto; margin-right: auto; border-collapse: collapse; border: thin solid black;
}

[is=cxx-table] caption {
	white-space: nowrap;
}

[is=cxx-table] caption caption {
	display: inline;
}

[is=cxx-table] th, [is=cxx-table] td {
	border-style: solid none; border-color: black; border-width: thin; padding: 0px 0.25em;
}

[is=cxx-table].column-rules th, [is=cxx-table].column-rules td {
	border-left-style: solid; border-right-style: solid;
}

[is=cxx-table] th {
	border-bottom: medium double;
}

[is=cxx-table].single-border th {
	border-bottom: thin solid;
}

[is=cxx-table].center td {
	text-align: center;
}

[is=cxx-table].list td {
	border: medium none; vertical-align: top;
}

[is=cxx-table].list ul {
	padding-left: 0px; margin: 0px;
}

[is=cxx-table].list ul li::before {
	content: "";
}cxx-figure {
	margin-left: auto; margin-right: auto;
}

cxx-figure figcaption {
	white-space: nowrap; text-align: center;
}

cxx-figure figcaption figcaption {
	display: inline;
}[is=cxx-definition-section] dt {
	font-weight: bold;
}

[is=cxx-definition-section] dd {
	margin-left: 0px;
}cxx-toc {
	display: block;
}

cxx-toc nav > ol {
	font-weight: bold;
}

cxx-toc ol {
	font-weight: normal; padding-left: 0px; margin-left: 0px;
}

cxx-toc li {
	list-style-type: none;
}

cxx-toc .marker {
	display: inline-block;
}

cxx-toc li .marker {
	width: 2em; text-align: left;
}

cxx-toc ol ol {
	margin-left: 2em;
}

cxx-toc li li .marker {
	width: 3em;
}

cxx-toc ol ol ol {
	margin-left: 3em;
}

cxx-toc li li li .marker {
	width: 3.5em;
}

cxx-toc ol ol ol ol {
	margin-left: 3.5em;
}

cxx-toc li li li li .marker {
	width: 4.5em;
}cxx-get-element-by-id {
	display: none;
}cxx-foreign-index {
	display: none;
}cxx-titlepage, cxx-titlepage .page {
	display: block; min-height: 100%;
}

cxx-titlepage .page {
	page-break-before: always; page-break-after: always; min-height: 100vh; margin-bottom: 2em;
}

@media print {
cxx-titlepage .page {
	height: 8.8in;
}


}

cxx-titlepage .page {
	position: relative;
}

cxx-titlepage table td, cxx-titlepage table th {
	border: medium none;
}

cxx-titlepagebody.cxx-draft .header, body.cxx-draft cxx-titlepage .header {
	position: absolute; right: 0px; top: 0px;
}

cxx-titlepagebody.cxx-draft h1, body.cxx-draft cxx-titlepage h1 {
	position: absolute; top: 40%; text-align: center;
}

cxx-titlepagebody.cxx-draft p.warning, body.cxx-draft cxx-titlepage p.warning {
	position: absolute; bottom: 5%;
}

cxx-titlepagebody.cxx-pdts .header, body.cxx-pdts cxx-titlepage .header, cxx-titlepagebody.cxx-dts .header, body.cxx-dts cxx-titlepage .header, cxx-titlepagebody.cxx-ts .header, body.cxx-ts cxx-titlepage .header {
	position: absolute; right: 0px; top: 0px; text-align: right;
}

cxx-titlepagebody.cxx-pdts .header cxx-docnum, body.cxx-pdts cxx-titlepage .header cxx-docnum, cxx-titlepagebody.cxx-dts .header cxx-docnum, body.cxx-dts cxx-titlepage .header cxx-docnum, cxx-titlepagebody.cxx-ts .header cxx-docnum, body.cxx-ts cxx-titlepage .header cxx-docnum {
	font-size: 150%;
}

cxx-titlepagebody.cxx-pdts .header cxx-docnum, body.cxx-pdts cxx-titlepage .header cxx-docnum, cxx-titlepagebody.cxx-dts .header cxx-docnum, body.cxx-dts cxx-titlepage .header cxx-docnum, cxx-titlepagebody.cxx-ts .header cxx-docnum, body.cxx-ts cxx-titlepage .header cxx-docnum {
	font-size: 150%;
}

cxx-titlepagebody.cxx-pdts hgroup, body.cxx-pdts cxx-titlepage hgroup, cxx-titlepagebody.cxx-dts hgroup, body.cxx-dts cxx-titlepage hgroup, cxx-titlepagebody.cxx-ts hgroup, body.cxx-ts cxx-titlepage hgroup {
	position: absolute; top: 30%;
}

cxx-titlepagebody.cxx-pdts hgroup *, body.cxx-pdts cxx-titlepage hgroup *, cxx-titlepagebody.cxx-dts hgroup *, body.cxx-dts cxx-titlepage hgroup *, cxx-titlepagebody.cxx-ts hgroup *, body.cxx-ts cxx-titlepage hgroup * {
	margin: 0px;
}

cxx-titlepagebody.cxx-pdts hgroup h1, body.cxx-pdts cxx-titlepage hgroup h1, cxx-titlepagebody.cxx-dts hgroup h1, body.cxx-dts cxx-titlepage hgroup h1, cxx-titlepagebody.cxx-ts hgroup h1, body.cxx-ts cxx-titlepage hgroup h1 {
	font-size: 150%; font-weight: bold;
}

cxx-titlepagebody.cxx-pdts hgroup h2, body.cxx-pdts cxx-titlepage hgroup h2, cxx-titlepagebody.cxx-dts hgroup h2, body.cxx-dts cxx-titlepage hgroup h2, cxx-titlepagebody.cxx-ts hgroup h2, body.cxx-ts cxx-titlepage hgroup h2 {
	font-size: 100%; font-weight: normal;
}

cxx-titlepagebody.cxx-pdts .footer, body.cxx-pdts cxx-titlepage .footer, cxx-titlepagebody.cxx-dts .footer, body.cxx-dts cxx-titlepage .footer, cxx-titlepagebody.cxx-ts .footer, body.cxx-ts cxx-titlepage .footer {
	position: absolute; left: 0px; bottom: 5%;
}

cxx-titlepagebody.cxx-pdts figure, body.cxx-pdts cxx-titlepage figure, cxx-titlepagebody.cxx-dts figure, body.cxx-dts cxx-titlepage figure, cxx-titlepagebody.cxx-ts figure, body.cxx-ts cxx-titlepage figure {
	border: 1px solid rgb(17, 17, 17); padding: 10px; margin-left: auto; margin-right: auto;
}

cxx-titlepagebody.cxx-pdts figcaption, body.cxx-pdts cxx-titlepage figcaption, cxx-titlepagebody.cxx-dts figcaption, body.cxx-dts cxx-titlepage figcaption, cxx-titlepagebody.cxx-ts figcaption, body.cxx-ts cxx-titlepage figcaption {
	text-align: center; font-weight: bold;
}

cxx-titlepagebody.cxx-pdts .warning, body.cxx-pdts cxx-titlepage .warning, cxx-titlepagebody.cxx-dts .warning, body.cxx-dts cxx-titlepage .warning, cxx-titlepagebody.cxx-ts .warning, body.cxx-ts cxx-titlepage .warning {
	position: absolute; bottom: 20%;
}

cxx-titlepagebody.cxx-pdts .copyright address, body.cxx-pdts cxx-titlepage .copyright address, cxx-titlepagebody.cxx-dts .copyright address, body.cxx-dts cxx-titlepage .copyright address, cxx-titlepagebody.cxx-ts .copyright address, body.cxx-ts cxx-titlepage .copyright address {
	font-style: normal; margin-left: 2em;
}

cxx-titlepagebody.cxx-pdts .copyright address a, body.cxx-pdts cxx-titlepage .copyright address a, cxx-titlepagebody.cxx-dts .copyright address a, body.cxx-dts cxx-titlepage .copyright address a, cxx-titlepagebody.cxx-ts .copyright address a, body.cxx-ts cxx-titlepage .copyright address a {
	color: inherit; text-decoration: inherit;
}

cxx-titlepage th {
	text-align: left; vertical-align: top;
}cxx-foreword {
	display: block; min-height: 100%;
}

cxx-foreword {
	page-break-before: always; page-break-after: always; min-height: 100vh; margin-bottom: 2em;
}

cxx-forewordbody.cxx-draft cxx-foreword -no-combinator, body.cxx-draft cxx-foreword cxx-foreword -no-combinator {
	display: none;
}cxx-ednote {
	display: none;
}

cxx-ednotebody.cxx-draft, body.cxx-draft cxx-ednote {
	display: block;
}

cxx-ednote aside {
	float: right; max-width: 40%; margin: 1ex; border: 1px dashed rgb(136, 136, 136); padding: 1ex; background-color: rgb(238, 238, 238);
}

cxx-ednote.para aside {
	float: none; max-width: none;
}cxx-note .nowrap {
	white-space: nowrap;
}cxx-footnote {
	font-family: serif; white-space: normal; text-indent: initial;textIndent: initial; text-indent: initial; 
}

@media screen {
cxx-footnote aside {
	float: right; max-width: 30%; margin-left: 1em;
}


}

@media print {
cxx-footnote sup, cxx-footnote .marker {
	display: none;
}

cxx-footnote aside {
	
}


}cxx-example {
	display: block;
}

cxx-example.inline {
	display: inline;
}

cxx-example .nowrap {
	white-space: nowrap;
}cxx-publish-button {
	display: block;
}cxx-codeblock {
	display: block;
}bnf-grammar {
	display: block; font-style: italic; margin-left: 0.35in;
}bnf-rule {
	display: block; margin-left: 0.6in;
}bnf-alt {
	display: block; margin-left: 1.2in;
}bnf-terminal {
	font-style: normal;
}w-br {
	white-space: normal;
}

w-br::after {
	content: "​";
}</style>
  <meta charset="utf-8">
  
  <style shim-shadowdom-css="">/* Copyright 2014 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

@page {
    margin: 10%;
}
@page :left {
    @top-left { content: string(docname); font-weight: bold; font-size: 10pt; }
    @top-right { content: normal; }
    @bottom-left { content: counter(page); font-size: 10pt; }
    @bottom-right { content: "© ISO/IEC " string(pubyear) " — All rights reserved";
                    font-size: 10pt; }
}
@page :right {
    @top-left { content: normal; }
    @top-right { content: string(docname); font-weight: bold; font-size: 10pt; }
    @bottom-left { content: "© ISO/IEC " string(pubyear) " — All rights reserved";
                   font-size: 10pt; }
    @bottom-right { content: counter(page); font-size: 10pt; }
}
@page :first {
    @top-left { content: normal; }
    @top-right { content: normal; }
    @bottom-left { content: normal; }
    @bottom-right { content: normal; }
}

body { margin: 0; }

@media screen {
    body { max-width: 7in;
           /* Make room for paragraph numbers. */
           margin-left: 2em }
}

@media print {
    html { font-size: 10pt; }
    *   code { font-size: 80%; }
    /* Note that only Prince generates clickable links. */
    *   a[href] { text-decoration:none; }
}

@media screen {
    /* Needed to make the <cxx-titlepage>'s vertical spacing work.
       For print see the <cxx-titlepage> definition. */
    html, body {height: 100%}
}

*   .docname { string-set: docname content(); }
*   .pubyear { string-set: pubyear content(); }

cxx-clause, cxx-foreword { page-break-before: always; }
@media screen {
    cxx-clause, cxx-toc, cxx-foreword { margin-top: 3em; }
}

cxx-clause  header, cxx-foreword  h1 { font-size: 150%; }
cxx-toc  h1 { font-size: 150%; }
cxx-clause cxx-section  header { font-size: 117%; }
cxx-clause cxx-section cxx-section  header { font-size: 100%; }

[data-bookmark-label] { bookmark-label: attr(data-bookmark-label); }
h1 { bookmark-level: 1; }
cxx-toc  h1 { bookmark-level: 2; }
cxx-clause h1, cxx-foreword h1 { bookmark-level: 2; }
cxx-clause cxx-section h1 { bookmark-level: 3; }
cxx-clause cxx-section cxx-section h1 { bookmark-level: 4; }
/* The <h2> is a subtitle, which shouldn't get a PDF bookmark. */
cxx-titlepage  h2 { bookmark-level: none; }

*  .section-number { string-set: current-section "§ " content(); }

p {margin-top: .5em; margin-bottom: .5em}
p:first-child, ul, ol {margin-top: 0}

[para_num]::before { content: attr(para_num); float: left;
                     font-size: 70%; margin-left: -2.5em; width: 1.5em; text-align: right; }

del {text-decoration: line-through; color: #8B0040;}
ins {text-decoration: underline; color: #005100;}

pre {
    margin-left: 1em;
    margin-top: .5em;
    margin-bottom: .5em;
}

*   wbr::after {
    white-space: normal;
    content: '\200B';
}
*   code {
    /* Make inline code avoid line wraps unless we override it with <wbr>. */
    white-space: nowrap;
}
*   pre code {
    /* Keep block-code wrapping according to its context. */
    white-space: inherit;
}

*   table {
    border-collapse: collapse;
}
*   td, th {
    padding-left: .2em;
    padding-right: .2em;
    border: thin solid black;
}

/* Use an em-dash for the list bullet.
   'print' is a proxy for supporting ::marker. */
@media screen {
    ul {
        list-style: none;
        /* Relative positioning on the 'ul' lets the absolutely-positioned
           marker align relative to it.*/
        position: relative;
    }
    ul li:before {
        content: "\2014";
        position: absolute; left: 10px;
    }
}
@media print {
    ul li::marker {
        content: "\2014";
    }
    [is=cxx-table].list ul li::marker {
        content: none;
    }
}

/* This is here rather than inside elements/toc.html because browsers
   don't understand leader() or target-counter(), so they drop them
   inside the CSSOM. */
@media print {
    /* Generate page numbers in the table of contents. */
    cxx-toc  a[href]::after { content: leader(" . ") target-counter(attr(href), page); }

    cxx-footnote  aside { float: footnote; footnote-policy: line; }
}</style><style shim-shadowdom-css="">/*******************************
          Flex Layout
*******************************/

html   [layout][horizontal], html   [layout][vertical] {
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

html   [layout][horizontal][inline], html   [layout][vertical][inline] {
  display: -ms-inline-flexbox;
  display: -webkit-inline-flex;
  display: inline-flex;
}

html   [layout][horizontal] {
  -ms-flex-direction: row;
  -webkit-flex-direction: row;
  flex-direction: row;
}

html   [layout][horizontal][reverse] {
  -ms-flex-direction: row-reverse;
  -webkit-flex-direction: row-reverse;
  flex-direction: row-reverse;
}

html   [layout][vertical] {
  -ms-flex-direction: column;
  -webkit-flex-direction: column;
  flex-direction: column;
}

html   [layout][vertical][reverse] {
  -ms-flex-direction: column-reverse;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
}

html   [layout][wrap] {
  -ms-flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  flex-wrap: wrap;
}

html   [layout][wrap-reverse] {
  -ms-flex-wrap: wrap-reverse;
  -webkit-flex-wrap: wrap-reverse;
  flex-wrap: wrap-reverse;
}

html   [flex] {
  -ms-flex: 1 1 0.000000001px;
  -webkit-flex: 1;
  flex: 1;
  -webkit-flex-basis: 0.000000001px;
  flex-basis: 0.000000001px;
}

html   [vertical][layout] > [flex][auto-vertical], html   [vertical][layout]  [flex][auto-vertical] {
  -ms-flex: 1 1 auto;
  -webkit-flex-basis: auto;
  flex-basis: auto;
}

html   [flex][auto] {
  -ms-flex: 1 1 auto;
  -webkit-flex-basis: auto;
  flex-basis: auto;
}

html   [flex][none] {
  -ms-flex: none;
  -webkit-flex: none;
  flex: none;
}

html   [flex][one] {
  -ms-flex: 1;
  -webkit-flex: 1;
  flex: 1;
}

html   [flex][two] {
  -ms-flex: 2;
  -webkit-flex: 2;
  flex: 2;
}

html   [flex][three] {
  -ms-flex: 3;
  -webkit-flex: 3;
  flex: 3;
}

html   [flex][four] {
  -ms-flex: 4;
  -webkit-flex: 4;
  flex: 4;
}

html   [flex][five] {
  -ms-flex: 5;
  -webkit-flex: 5;
  flex: 5;
}

html   [flex][six] {
  -ms-flex: 6;
  -webkit-flex: 6;
  flex: 6;
}

html   [flex][seven] {
  -ms-flex: 7;
  -webkit-flex: 7;
  flex: 7;
}

html   [flex][eight] {
  -ms-flex: 8;
  -webkit-flex: 8;
  flex: 8;
}

html   [flex][nine] {
  -ms-flex: 9;
  -webkit-flex: 9;
  flex: 9;
}

html   [flex][ten] {
  -ms-flex: 10;
  -webkit-flex: 10;
  flex: 10;
}

html   [flex][eleven] {
  -ms-flex: 11;
  -webkit-flex: 11;
  flex: 11;
}

html   [flex][twelve] {
  -ms-flex: 12;
  -webkit-flex: 12;
  flex: 12;
}

/* alignment in cross axis */

html   [layout][start] {
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
}

html   [layout][center], html   [layout][center-center] {
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

html   [layout][end] {
  -ms-flex-align: end;
  -webkit-align-items: flex-end;
  align-items: flex-end;
}

/* alignment in main axis */

html   [layout][start-justified] {
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
}

html   [layout][center-justified], html   [layout][center-center] {
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}

html   [layout][end-justified] {
  -ms-flex-pack: end;
  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}

html   [layout][around-justified] {
  -ms-flex-pack: distribute;
  -webkit-justify-content: space-around;
  justify-content: space-around;
}

html   [layout][justified] {
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}

/* self alignment */

html   [self-start] {
  -ms-align-self: flex-start;
  -webkit-align-self: flex-start;
  align-self: flex-start;
}

html   [self-center] {
  -ms-align-self: center;
  -webkit-align-self: center;
  align-self: center;
}

html   [self-end] {
  -ms-align-self: flex-end;
  -webkit-align-self: flex-end;
  align-self: flex-end;
}

html   [self-stretch] {
  -ms-align-self: stretch;
  -webkit-align-self: stretch;
  align-self: stretch;
}

/*******************************
          Other Layout
*******************************/

html   [block] {
  display: block;
}

/* ie support for hidden */
html   [hidden] {
  display: none !important;
}

html   [relative] {
  position: relative;
}

html   [fit] {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

body[fullbleed] {
  margin: 0;
  height: 100vh;
}

/*******************************
            Other
*******************************/

html   [segment], html   segment {
  display: block;
  position: relative;
  -webkit-box-sizing: border-box;
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  margin: 1em 0.5em;
  padding: 1em;
  background-color: white;
  -webkit-box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.1);
  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.1);
  border-radius: 5px 5px 5px 5px;
}</style>
<style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none;}
[touch-action="auto"]{ -ms-touch-action: auto; touch-action: auto;}
[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x;}
[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y;}
[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y;}
[touch-action="manipulation"]{ -ms-touch-action: manipulation; touch-action: manipulation;}
</style><title>Technical Specification for C++ Extensions for Parallelism Version 2, Working Draft</title></head>
<body class="cxx-draft">

<cxx-titlepage stage="draft">
    
    
      <div class="page">
        <table class="header">
          
            <tbody><tr><th>Document Number:</th><td><cxx-docnum class="docname">N4698</cxx-docnum></td></tr>
          
          
            <tr><th>Date:</th><td><time pubdate=""><span class="pubyear">2017</span>-10-16</time></td></tr>
          
          
            <tr><th>Revises:</th><td><cxx-revises><a href="http://wg21.link/N4669">N4669</a></cxx-revises></td></tr>
          
          
            <tr><th>Editor:</th><td><cxx-editor>
    Jared Hoberock<br>
    NVIDIA Corporation<br>
    <cxx-email><a href="mailto:jhoberock@nvidia.com">jhoberock@nvidia.com</a></cxx-email>
  </cxx-editor></td></tr>
          
        </tbody></table>
        <h1>Working Draft, Technical Specification for C++ Extensions for Parallelism Version 2</h1>
        <p class="warning"><strong>Note: this is an early draft. It’s known to be
        incomplet and incorrekt, and it has lots of b<span style="margin-left: -1.2pt; margin-right: 1pt">a</span>d<span style="width:1.5em"> </span>for<span style="margin-left:-3pt; margin-right:0.6pt">mat</span>ti<span style="position:relative; top:-0.15ex">n</span>g.</strong></p>
      </div>
    

    

    
  </cxx-titlepage>

<cxx-toc>
    
    <nav>
      <h1>Contents</h1>
      
        
          <ol>
            
              <li><span class="marker">1</span><a href="n4698.html#parallel.scope">Scope</a>
        
      </li>
            
              <li><span class="marker">2</span><a href="n4698.html#parallel.references">Normative references</a>
        
      </li>
            
              <li><span class="marker">3</span><a href="n4698.html#parallel.defns">Terms and definitions</a>
        
      </li>
            
              <li><span class="marker">4</span><a href="n4698.html#parallel.general">General</a>
        
          <ol>
            
              <li><span class="marker">4.1</span><a href="n4698.html#parallel.general.namespaces">Namespaces and headers</a>
        
      </li>
            
              <li><span class="marker">4.2</span><a href="n4698.html#parallel.general.features">Feature-testing recommendations</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">5</span><a href="n4698.html#parallel.execpol">Execution policies</a>
        
          <ol>
            
              <li><span class="marker">5.1</span><a href="n4698.html#parallel.execpol.general">In general</a>
        
      </li>
            
              <li><span class="marker">5.2</span><a href="n4698.html#parallel.execpol.synopsis">Header &lt;experimental/execution_policy&gt; synopsis</a>
        
      </li>
            
              <li><span class="marker">5.3</span><a href="n4698.html#parallel.execpol.type">Execution policy type trait</a>
        
      </li>
            
              <li><span class="marker">5.4</span><a href="n4698.html#parallel.execpol.seq">Sequential execution policy</a>
        
      </li>
            
              <li><span class="marker">5.5</span><a href="n4698.html#parallel.execpol.par">Parallel execution policy</a>
        
      </li>
            
              <li><span class="marker">5.6</span><a href="n4698.html#parallel.execpol.parvec">Parallel+Vector execution policy</a>
        
      </li>
            
              <li><span class="marker">5.7</span><a href="n4698.html#parallel.execpol.unseq">Unsequenced execution policy</a>
        
      </li>
            
              <li><span class="marker">5.8</span><a href="n4698.html#parallel.execpol.vec">Vector execution policy</a>
        
      </li>
            
              <li><span class="marker">5.9</span><a href="n4698.html#parallel.execpol.dynamic">Dynamic execution policy</a>
        
          <ol>
            
              <li><span class="marker">5.9.1</span><a href="n4698.html#parallel.execpol.con">execution_policy construct/assign</a>
        
      </li>
            
              <li><span class="marker">5.9.2</span><a href="n4698.html#parallel.execpol.access">execution_policy object access</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">5.10</span><a href="n4698.html#parallel.execpol.objects">Execution policy objects</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">6</span><a href="n4698.html#parallel.exceptions">Parallel exceptions</a>
        
          <ol>
            
              <li><span class="marker">6.1</span><a href="n4698.html#parallel.exceptions.behavior">Exception reporting behavior</a>
        
      </li>
            
              <li><span class="marker">6.2</span><a href="n4698.html#parallel.exceptions.synopsis">Header &lt;experimental/exception_list&gt; synopsis</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">7</span><a href="n4698.html#parallel.alg">Parallel algorithms</a>
        
          <ol>
            
              <li><span class="marker">7.1</span><a href="n4698.html#parallel.alg.general">In general</a>
        
          <ol>
            
              <li><span class="marker">7.1.1</span><a href="n4698.html#parallel.alg.general.user">Requirements on user-provided function objects</a>
        
      </li>
            
              <li><span class="marker">7.1.2</span><a href="n4698.html#parallel.alg.general.exec">Effect of execution policies on algorithm execution</a>
        
      </li>
            
              <li><span class="marker">7.1.3</span><a href="n4698.html#parallel.alg.general.wavefront">Wavefront Application</a>
        
      </li>
            
              <li><span class="marker">7.1.4</span><a href="n4698.html#parallel.alg.overloads">ExecutionPolicy algorithm overloads</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">7.2</span><a href="n4698.html#parallel.alg.defns">Definitions</a>
        
      </li>
            
              <li><span class="marker">7.3</span><a href="n4698.html#parallel.alg.ops">Non-Numeric Parallel Algorithms</a>
        
          <ol>
            
              <li><span class="marker">7.3.1</span><a href="n4698.html#parallel.alg.ops.synopsis">Header &lt;experimental/algorithm&gt; synopsis</a>
        
      </li>
            
              <li><span class="marker">7.3.2</span><a href="n4698.html#parallel.alg.foreach">For each</a>
        
      </li>
            
              <li><span class="marker">7.3.3</span><a href="n4698.html#parallel.alg.novec">No vec</a>
        
      </li>
            
              <li><span class="marker">7.3.4</span><a href="n4698.html#parallel.alg.ordupdate.class">Ordered update class</a>
        
      </li>
            
              <li><span class="marker">7.3.5</span><a href="n4698.html#parallel.alg.ordupdate.func">Ordered update function template</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">7.4</span><a href="n4698.html#parallel.alg.numeric">Numeric Parallel Algorithms</a>
        
          <ol>
            
              <li><span class="marker">7.4.1</span><a href="n4698.html#parallel.alg.numeric.synopsis">Header &lt;experimental/numeric&gt; synopsis</a>
        
      </li>
            
              <li><span class="marker">7.4.2</span><a href="n4698.html#parallel.alg.reduce">Reduce</a>
        
      </li>
            
              <li><span class="marker">7.4.3</span><a href="n4698.html#parallel.alg.exclusive.scan">Exclusive scan</a>
        
      </li>
            
              <li><span class="marker">7.4.4</span><a href="n4698.html#parallel.alg.inclusive.scan">Inclusive scan</a>
        
      </li>
            
              <li><span class="marker">7.4.5</span><a href="n4698.html#parallel.alg.transform.reduce">Transform reduce</a>
        
      </li>
            
              <li><span class="marker">7.4.6</span><a href="n4698.html#parallel.alg.transform.exclusive.scan">Transform exclusive scan</a>
        
      </li>
            
              <li><span class="marker">7.4.7</span><a href="n4698.html#parallel.alg.transform.inclusive.scan">Transform inclusive scan</a>
        
      </li>
            
          </ol>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">8</span><a href="n4698.html#parallel.task_block">Task Block</a>
        
          <ol>
            
              <li><span class="marker">8.1</span><a href="n4698.html#parallel.task_block.synopsis">Header &lt;experimental/task_block&gt; synopsis</a>
        
      </li>
            
              <li><span class="marker">8.2</span><a href="n4698.html#parallel.task_block.task_cancelled_exception">Class task_cancelled_exception</a>
        
          <ol>
            
              <li><span class="marker">8.2.1</span><a href="n4698.html#parallel.task_block.task_cancelled_exception.what">task_cancelled_exception member function what</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">8.3</span><a href="n4698.html#parallel.task_block.class">Class task_block</a>
        
          <ol>
            
              <li><span class="marker">8.3.1</span><a href="n4698.html#parallel.task_block.class.run">task_block member function template run</a>
        
      </li>
            
              <li><span class="marker">8.3.2</span><a href="n4698.html#parallel.task_block.class.wait">task_block member function wait</a>
        
      </li>
            
          </ol>
        
      </li>
            
              <li><span class="marker">8.4</span><a href="n4698.html#parallel.task_block.define_task_block">Function template define_task_block</a>
        
      </li>
            
              <li><span class="marker">8.5</span><a href="n4698.html#parallel.task_block.exceptions">Exception Handling</a>
        
      </li>
            
          </ol>
        
      </li>
            
          </ol>
        
      
    </nav>
  </cxx-toc>


<cxx-clause id="parallel.scope">
    

    <section>
      <header><span class="section-number">1</span> <h1 data-bookmark-label="1 Scope">Scope</h1> <span style="float:right"><a href="n4698.html#parallel.scope">[parallel.scope]</a></span></header>
      
  
    <p id="parallel.scope.1" para_num="1">This Technical Specification describes requirements for implementations of an
    interface that computer programs written in the C++ programming language may
    use to invoke algorithms with parallel execution. The algorithms described by
    this Technical Specification are realizable across a broad class of
    computer architectures.</p>
    
    <p id="parallel.scope.2" para_num="2">This Technical Specification is non-normative. Some of the functionality
    described by this Technical Specification may be considered for standardization
    in a future version of C++, but it is not currently part of any C++ standard.
    Some of the functionality in this Technical Specification may never be
    standardized, and other functionality may be standardized in a substantially
    changed form.</p>
    
    <p id="parallel.scope.3" para_num="3">The goal of this Technical Specification is to build widespread existing
    practice for parallelism in the C++ standard algorithms library. It gives
    advice on extensions to those vendors who wish to provide them.</p>

    </section>
  </cxx-clause>


<cxx-clause id="parallel.references">
    

    <section>
      <header><span class="section-number">2</span> <h1 data-bookmark-label="2 Normative references">Normative references</h1> <span style="float:right"><a href="n4698.html#parallel.references">[parallel.references]</a></span></header>
      
  

  <p id="parallel.references.1" para_num="1">The following referenced document is indispensable for the
  application of this document. For dated references, only the
  edition cited applies. For undated references, the latest edition
  of the referenced document (including any amendments) applies.</p>

  <ul>
    <li>ISO/IEC 14882:—<cxx-footnote><!--
    Be sure not to introduce whitespace here, as it appears around the footnote.
  --><sup id="footnote-call-1"><a href="n4698.html#footnote-body-1">1</a></sup><aside class="footnote" id="footnote-body-1"><span class="marker"><a href="n4698.html#footnote-call-1">1</a>) </span>To be published. Section references are relative to <a href="http://www.open-std.org/jtc1/sc22/wg21/prot/14882fdis/n3937.pdf">N3937</a>.</aside></cxx-footnote>,
    <cite>Programming Languages — C++</cite>
    </li>
  </ul>

  <p id="parallel.references.2" para_num="2">ISO/IEC 14882:— is herein called the <dfn>C++ Standard</dfn>.
  The library described in ISO/IEC 14882:— clauses 17-30 is herein called
  the <dfn>C++ Standard Library</dfn>. The C++ Standard Library components described in
  ISO/IEC 14882:— clauses 25, 26.7 and 20.7.2 are herein called the <dfn>C++ Standard
  Algorithms Library</dfn>.</p>

  <p id="parallel.references.3" para_num="3">Unless otherwise specified, the whole of the C++ Standard's Library
  introduction (<cxx-ref in="cxx" to="library">C++14 <span title="library">§17</span></cxx-ref>) is included into this
  Technical Specification by reference.</p>

    </section>
  </cxx-clause>


<cxx-clause id="parallel.defns">
    

    <section>
      <header><span class="section-number">3</span> <h1 data-bookmark-label="3 Terms and definitions">Terms and definitions</h1> <span style="float:right"><a href="n4698.html#parallel.defns">[parallel.defns]</a></span></header>
      
  

  <p id="parallel.defns.1" para_num="1">For the purposes of this document, the terms and definitions given in the C++ Standard and the following apply.</p>

  <p id="parallel.defns.2" para_num="2">A <dfn>parallel algorithm</dfn> is a function template described by this Technical Specification declared in namespace <code>std::experimental::parallel::v2</code> with a formal template parameter named <code>ExecutionPolicy</code>.</p>

  <p id="parallel.defns.3" para_num="3">
    Parallel algorithms access objects indirectly accessible via their arguments by invoking the following functions:

    </p><ul>
      <li>
        All operations of the categories of the iterators that the algorithm is instantiated with.
      </li>

      <li>
        Functions on those sequence elements that are required by its specification.
      </li>

      <li>
        User-provided function objects to be applied during the execution of the algorithm, if required by the specification.
      </li>

      <li>
        Operations on those function objects required by the specification.

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          See clause 25.1 of <em>C++ Standard Algorithms Library</em>.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      </li>
    </ul>

    These functions are herein called <em>element access functions</em>.

    <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    
      The <code>sort</code> function may invoke the following element access functions:

      <ul>
        <li>
          Methods of the random-access iterator of the actual template argument, as per 24.2.7, as implied by the name of the
          template parameters <code>RandomAccessIterator</code>.
        </li>

        <li>
          The <code>swap</code> function on the elements of the sequence (as per 25.4.1.1 [sort]/2).
        </li>

        <li>
          The user-provided <code>Compare</code> function object.
        </li>
      </ul>
    
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example>

    </section>
  </cxx-clause>


<cxx-clause id="parallel.general">
    

    <section>
      <header><span class="section-number">4</span> <h1 data-bookmark-label="4 General">General</h1> <span style="float:right"><a href="n4698.html#parallel.general">[parallel.general]</a></span></header>
      
  
  <cxx-section id="parallel.general.namespaces">
    

    <section>
      <header><span class="section-number">4.1</span> <h1 data-bookmark-label="4.1 Namespaces and headers">Namespaces and headers</h1> <span style="float:right"><a href="n4698.html#parallel.general.namespaces">[parallel.general.namespaces]</a></span></header>
      
    

    <p id="parallel.general.namespaces.1" para_num="1">Since the extensions described in this Technical Specification are
    experimental and not part of the C++ Standard Library, they should not be
    declared directly within namespace <code>std</code>. Unless otherwise specified, all
    components described in this Technical Specification are declared in namespace 
    <code>std::experimental::parallel::v2</code>.</p>

    <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
    Once standardized, the components described by this Technical Specification are expected to be promoted to namespace <code>std</code>. 
    
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>

    <p id="parallel.general.namespaces.2" para_num="2">Unless otherwise specified, references to such entities described in this
    Technical Specification are assumed to be qualified with
    <code>std::experimental::parallel::v2</code>, and references to entities described in the C++
    Standard Library are assumed to be qualified with <code>std::</code>.</p>

    <p id="parallel.general.namespaces.3" para_num="3">Extensions that are expected to eventually be added to an existing header
    <code>&lt;meow&gt;</code> are provided inside the <code>&lt;experimental/meow&gt;</code> header,
    which shall include the standard contents of <code>&lt;meow&gt;</code> as if by</p>

<pre><code>    #include &lt;meow&gt;</code>
</pre>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.general.features">
    

    <section>
      <header><span class="section-number">4.2</span> <h1 data-bookmark-label="4.2 Feature-testing recommendations">Feature-testing recommendations</h1> <span style="float:right"><a href="n4698.html#parallel.general.features">[parallel.general.features]</a></span></header>
      
         
    <p id="parallel.general.features.1" para_num="1">An implementation that provides support for this Technical Specification shall define the feature test macro(s) in Table 1.</p>

    <del>
    <table is="cxx-table" class="column-rules">
    

    <caption>Table 1 — <wbr><span>Feature Test Macro(s)</span></caption>
    
      

      <thead>
        <tr>
          <th>Name</th>
          <th>Value</th>
          <th>Header</th>
        </tr>
        <tr>
          <td><code>__cpp_lib_experimental_parallel_algorithm</code></td>
          <td>201505</td>
          <td>
            <code>&lt;experimental/algorithm&gt;</code><br>
            <code>&lt;experimental/exception_list&gt;</code><br>
            <code>&lt;experimental/execution_policy&gt;</code><br>
            <code>&lt;experimental/numeric&gt;</code>
          </td>
        </tr>
        <tr>
          <td><code>__cpp_lib_experimental_parallel_task_block</code></td>
          <td>201510</td>
          <td>
            <code>&lt;experimental/task_block&gt;</code><br>
          </td>
        </tr>
      </thead>
    
  </table>
    </del>

    <ins>
    <table is="cxx-table" class="column-rules">
    

    <caption>Table 2 — <wbr><span>Feature Test Macro(s)</span></caption>
    
      

      <thead>
        <tr>
          <th>Doc. No.</th>
          <th>Title</th>
          <th>Primary Section</th>
          <th>Macro Name</th>
          <th>Value</th>
          <th>Header</th>
        </tr>
        <tr>
          <td>N4505</td>
          <td>Working Draft, Technical Specification for C++ Extensions for Parallelism</td>
          <td><cxx-ref to="parallel.alg" <="" cxx-ref=""><a title="parallel.alg" href="n4698.html#parallel.alg">7</a></cxx-ref></td>
          <td><code>__cpp_lib_experimental_parallel_algorithm</code></td>
          <td>201505</td>
          <td>
            <code>&lt;experimental/algorithm&gt;</code><br>
            <code>&lt;experimental/exception_list&gt;</code><br>
            <code>&lt;experimental/execution_policy&gt;</code><br>
            <code>&lt;experimental/numeric&gt;</code>
          </td>
        </tr>
        <tr>
          <td>P0155R0</td>
          <td>Task Block R5</td>
          <td><cxx-ref to="parallel.task_block"><a title="parallel.task_block" href="n4698.html#parallel.task_block">8</a></cxx-ref></td>
          <td><code>__cpp_lib_experimental_parallel_task_block</code></td>
          <td>201510</td>
          <td>
            <code>&lt;experimental/task_block&gt;</code><br>
          </td>
        </tr>
        <tr>
          <td>P0076R4</td>
          <td>Vector and Wavefront Policies</td>
          <td><cxx-ref to="parallel.execpol.unseq" <="" cxx-ref=""><a title="parallel.execpol.unseq" href="n4698.html#parallel.execpol.unseq">5.7</a></cxx-ref></td>
          <td><code>__cpp_lib_experimental_execution_vector_policy</code></td>
          <td>201707</td>
          <td>
            <code>&lt;experimental/algorithm&gt;</code><br>
            <code>&lt;experimental/execution&gt;</code><br>
          </td>
        </tr>
      </thead>
    
  </table>
    <ins>
  </ins></ins>
    </section>
  </cxx-section>

    </section>
  </cxx-clause>


<cxx-clause id="parallel.execpol">
    

    <section>
      <header><span class="section-number">5</span> <h1 data-bookmark-label="5 Execution policies">Execution policies</h1> <span style="float:right"><a href="n4698.html#parallel.execpol">[parallel.execpol]</a></span></header>
      
  
  <cxx-section id="parallel.execpol.general">
    

    <section>
      <header><span class="section-number">5.1</span> <h1 data-bookmark-label="5.1 In general">In general</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.general">[parallel.execpol.general]</a></span></header>
      
    
      <p id="parallel.execpol.general.1" para_num="1">
        This clause describes classes that are <dfn>execution policy</dfn> types. An object
        of an execution policy type indicates the kinds of parallelism allowed in the execution
        of an algorithm and expresses the consequent requirements on the element
        access functions.
      </p>

      <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    
    <pre>std::vector&lt;int&gt; v = ...

// standard sequential sort
std::sort(v.begin(), v.end());

using namespace std::experimental::parallel;

// explicitly sequential sort
sort(seq, v.begin(), v.end());

// permitting parallel execution
sort(par, v.begin(), v.end());

// permitting vectorization as well
sort(par_vec, v.begin(), v.end());

// sort with dynamically-selected execution
size_t threshold = ...
execution_policy exec = seq;
if (v.size() &gt; threshold)
{
  exec = par;
}

sort(exec, v.begin(), v.end());
</pre>
    
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example><pre></pre> 
    <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
      Because different parallel architectures may require idiosyncratic
      parameters for efficient execution, implementations of the Standard Library 
      may provide additional execution policies to those described in this
      Technical Specification as extensions.
    
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
  
    </section>
  </cxx-section>
  <cxx-section id="parallel.execpol.synopsis">
    

    <section>
      <header><span class="section-number">5.2</span> <h1 data-bookmark-label="5.2 Header &lt;experimental/execution_policy&gt; synopsis">Header <code>&lt;experimental/execution_policy&gt;</code> synopsis</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.synopsis">[parallel.execpol.synopsis]</a></span></header>
      
  

<pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {
  <cxx-ref insynopsis="" to="parallel.execpol.type">// <i><a title="parallel.execpol.type" href="n4698.html#parallel.execpol.type">5.3</a>, Execution policy type trait</i></cxx-ref>
  template&lt;class T&gt; struct is_execution_policy;
  template&lt;class T&gt; constexpr bool is_execution_policy_v = is_execution_policy&lt;T&gt;::value;

  <cxx-ref insynopsis="" to="parallel.execpol.seq">// <i><a title="parallel.execpol.seq" href="n4698.html#parallel.execpol.seq">5.4</a>, Sequential execution policy</i></cxx-ref>
  class sequential_execution_policy;

  <cxx-ref insynopsis="" to="parallel.execpol.par">// <i><a title="parallel.execpol.par" href="n4698.html#parallel.execpol.par">5.5</a>, Parallel execution policy</i></cxx-ref>
  class parallel_execution_policy;

  <cxx-ref insynopsis="" to="parallel.execpol.parvec">// <i><a title="parallel.execpol.parvec" href="n4698.html#parallel.execpol.parvec">5.6</a>, Parallel+Vector execution policy</i></cxx-ref>
  class parallel_vector_execution_policy;

  <cxx-ref insynopsis="" to="parallel.execpol.dynamic">// <i><a title="parallel.execpol.dynamic" href="n4698.html#parallel.execpol.dynamic">5.9</a>, Dynamic execution policy</i></cxx-ref>
  class execution_policy;

<ins>namespace execution {
  <cxx-ref insynopsis="" to="parallel.execpol.unseq">// <i><a title="parallel.execpol.unseq" href="n4698.html#parallel.execpol.unseq">5.7</a>, Unsequenced execution policy</i></cxx-ref>
  <ins>class unsequenced_policy;</ins>

  <cxx-ref insynopsis="" to="parallel.execpol.vec">// <i><a title="parallel.execpol.vec" href="n4698.html#parallel.execpol.vec">5.8</a>, Vector execution policy</i></cxx-ref>
  <ins>class vector_policy;</ins>
}</ins>
}
}
}
</pre>
  
    </section>
  </cxx-section>
  <cxx-section id="parallel.execpol.type">
    

    <section>
      <header><span class="section-number">5.3</span> <h1 data-bookmark-label="5.3 Execution policy type trait">Execution policy type trait</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.type">[parallel.execpol.type]</a></span></header>
      
    

<pre>template&lt;class T&gt; struct is_execution_policy { <em>see below</em> };
</pre>

    <p id="parallel.execpol.type.1" para_num="1"><code>is_execution_policy</code>
 can be used to detect parallel execution policies for the purpose of 
excluding function signatures from otherwise ambiguous overload 
resolution participation.</p>
    
    <p id="parallel.execpol.type.2" para_num="2"><code>is_execution_policy&lt;T&gt;</code> shall be a UnaryTypeTrait with a BaseCharacteristic of <code>true_type</code> if <code>T</code> is the type of a standard or implementation-defined execution policy, otherwise <code>false_type</code>.

    </p><pre></pre>

    <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
      This provision reserves the privilege of creating non-standard execution policies to the library implementation.
    
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
    
    <p id="parallel.execpol.type.3" para_num="3">The behavior of a program that adds specializations for <code>is_execution_policy</code> is undefined.</p>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.execpol.seq">
    

    <section>
      <header><span class="section-number">5.4</span> <h1 data-bookmark-label="5.4 Sequential execution policy">Sequential execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.seq">[parallel.execpol.seq]</a></span></header>
      
    

    <pre>class sequential_execution_policy{ <i>unspecified</i> };
</pre>

    <p id="parallel.execpol.seq.1" para_num="1">The class <code>sequential_execution_policy</code>
 is an execution policy type used as a unique type to disambiguate 
parallel algorithm overloading and require that a parallel algorithm's 
execution may not be parallelized.</p>

  
    </section>
  </cxx-section>
  <cxx-section id="parallel.execpol.par">
    

    <section>
      <header><span class="section-number">5.5</span> <h1 data-bookmark-label="5.5 Parallel execution policy">Parallel execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.par">[parallel.execpol.par]</a></span></header>
      
    

<pre>class parallel_execution_policy{ <i>unspecified</i> };
</pre>

    <p id="parallel.execpol.par.1" para_num="1">The class <code>parallel_execution_policy</code>
 is an execution policy type used as a unique type to disambiguate 
parallel algorithm overloading and indicate that a parallel algorithm's 
execution may be parallelized.</p>

  
    </section>
  </cxx-section>
  <cxx-section id="parallel.execpol.parvec">
    

    <section>
      <header><span class="section-number">5.6</span> <h1 data-bookmark-label="5.6 Parallel+Vector execution policy">Parallel+Vector execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.parvec">[parallel.execpol.parvec]</a></span></header>
      
    

<pre>class parallel_vector_execution_policy{ <i>unspecified</i> };
</pre>

    <p id="parallel.execpol.parvec.1" para_num="1">The class <code>class parallel_vector_execution_policy</code>
 is an execution policy type used as a unique type to disambiguate 
parallel algorithm overloading and indicate that a parallel algorithm's 
execution may be vectorized and parallelized.</p>

  
    </section>
  </cxx-section>

  <cxx-section id="parallel.execpol.unseq">
    

    <section>
      <header><span class="section-number">5.7</span> <h1 data-bookmark-label="5.7 Unsequenced execution policy">Unsequenced execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.unseq">[parallel.execpol.unseq]</a></span></header>
      
    
<ins>

<pre>class unsequenced_policy{ <i>unspecified</i> };
</pre>

    <p>The class <code>unsequenced_policy</code> is an execution policy 
type used as a unique type to disambiguate parallel algorithm 
overloading and indicate that a parallel algorithm's execution may be 
vectorized, e.g., executed on a single thread using instructions that 
operate on multiple data items.</p>

</ins>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.execpol.vec">
    

    <section>
      <header><span class="section-number">5.8</span> <h1 data-bookmark-label="5.8 Vector execution policy">Vector execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.vec">[parallel.execpol.vec]</a></span></header>
      
    
<ins>

<pre>class vector_policy{ <i>unspecified</i> };
</pre>

    <p>The class <code>vector_policy</code> is an execution policy type 
used as a unique type to disambiguate parallel algorithm overloading and
 indicate that a parallel algorithm's execution may be vectorized. 
Additionally, such vectorization will result in an execution that 
respects the sequencing constraints of wavefront application 
([parallel.alg.general.wavefront]). <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    The implementation thus makes stronger guarantees than for <code>unsequenced_policy</code>, for example.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note></p>

</ins>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.execpol.dynamic">
    

    <section>
      <header><span class="section-number">5.9</span> <h1 data-bookmark-label="5.9 Dynamic execution policy">Dynamic execution policy</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.dynamic">[parallel.execpol.dynamic]</a></span></header>
      
    

<pre>class execution_policy
{
  public:
    <cxx-ref insynopsis="" to="parallel.execpol.con">// <i><a title="parallel.execpol.con" href="n4698.html#parallel.execpol.con">5.9.1</a>, execution_policy construct/assign</i></cxx-ref>
    template&lt;class T&gt; execution_policy(const T&amp; exec);
    template&lt;class T&gt; execution_policy&amp; operator=(const T&amp; exec);

    <cxx-ref insynopsis="" to="parallel.execpol.access">// <i><a title="parallel.execpol.access" href="n4698.html#parallel.execpol.access">5.9.2</a>, execution_policy object access</i></cxx-ref>
    const type_info&amp; type() const noexcept;
    template&lt;class T&gt; T* get() noexcept;
    template&lt;class T&gt; const T* get() const noexcept;
};
</pre>

    <p id="parallel.execpol.dynamic.1" para_num="1">The class <code>execution_policy</code> is a container for execution policy objects.
    <code>execution_policy</code> allows dynamic control over standard algorithm execution.</p>

    <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    
      <pre>std::vector&lt;float&gt; sort_me = ...
        
using namespace std::experimental::parallel;
execution_policy exec = seq;

if(sort_me.size() &gt; threshold)
{
  exec = std::par;
}
 
std::sort(exec, std::begin(sort_me), std::end(sort_me));</pre>
    
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example>

    <p id="parallel.execpol.dynamic.2" para_num="2">Objects of type <code>execution_policy</code> shall be constructible and assignable from objects of
    type <code>T</code> for which <code>is_execution_policy&lt;T&gt;::value</code> is <code>true</code>.</p>

    <cxx-section id="parallel.execpol.con">
    

    <section>
      <header><span class="section-number">5.9.1</span> <h1 data-bookmark-label="5.9.1 execution_policy construct/assign"><code>execution_policy</code> construct/assign</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.con">[parallel.execpol.con]</a></span></header>
      
      

      <cxx-function id="parallel.execpol.con.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class T&gt; execution_policy(const T&amp; exec);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.execpol.con.2" para_num="2">
    
    <dt>Effects:</dt><dd>Constructs an <code>execution_policy</code> object with a copy of <code>exec</code>'s state.</dd>
  </cxx-effects>

        <cxx-remarks id="parallel.execpol.con.3" para_num="3">
    
    <dt>Remarks:</dt><dd>
          This constructor shall not participate in overload resolution unless
          <code>is_execution_policy&lt;T&gt;::value</code> is <code>true</code>.
        </dd>
  </cxx-remarks>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.execpol.con.4" para_num="4">
    
    <pre><code><cxx-signature>template&lt;class T&gt; execution_policy&amp; operator=(const T&amp; exec);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.execpol.con.5" para_num="5">
    
    <dt>Effects:</dt><dd>Assigns a copy of <code>exec</code>'s state to <code>*this</code>.</dd>
  </cxx-effects>

        <cxx-returns id="parallel.execpol.con.6" para_num="6">
    
    <dt>Returns:</dt><dd><code>*this</code>.
      </dd>
  </cxx-returns>
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.execpol.access">
    

    <section>
      <header><span class="section-number">5.9.2</span> <h1 data-bookmark-label="5.9.2 execution_policy object access"><code>execution_policy</code> object access</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.access">[parallel.execpol.access]</a></span></header>
      
      

      <cxx-function id="parallel.execpol.access.1" para_num="1">
    
    <pre><code><cxx-signature>const type_info&amp; type() const noexcept;</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.execpol.access.2" para_num="2">
    
    <dt>Returns:</dt><dd><code>typeid(T)</code>, such that <code>T</code> is the type of the execution policy object contained by <code>*this</code>.</dd>
  </cxx-returns>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.execpol.access.3" para_num="3">
    
    <pre><code><cxx-signature>template&lt;class T&gt; T* get() noexcept;</cxx-signature><cxx-signature>template&lt;class T&gt; const T* get() const noexcept;</cxx-signature></code></pre>

    <dl>
      
      
      

        <cxx-returns id="parallel.execpol.access.4" para_num="4">
    
    <dt>Returns:</dt><dd>If <code>target_type() == typeid(T)</code>, a pointer to the stored execution policy object; otherwise a null pointer.</dd>
  </cxx-returns>

        <cxx-requires id="parallel.execpol.access.5" para_num="5">
    
    <dt>Requires:</dt><dd>
          <code>is_execution_policy&lt;T&gt;::value</code> is <code>true</code>.
        </dd>
  </cxx-requires>
      
    </dl>
  </cxx-function>

    
    </section>
  </cxx-section>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.execpol.objects">
    

    <section>
      <header><span class="section-number">5.10</span> <h1 data-bookmark-label="5.10 Execution policy objects">Execution policy objects</h1> <span style="float:right"><a href="n4698.html#parallel.execpol.objects">[parallel.execpol.objects]</a></span></header>
      
    

<pre>constexpr sequential_execution_policy      seq{};
constexpr parallel_execution_policy        par{};
constexpr parallel_vector_execution_policy par_vec{};
</pre>

    <p id="parallel.execpol.objects.1" para_num="1">The header <code>&lt;experimental/execution_policy&gt;</code> declares a global object associated with each type of execution policy defined by this Technical Specification.</p>
  
    </section>
  </cxx-section>

    </section>
  </cxx-clause>

<cxx-clause id="parallel.exceptions">
    

    <section>
      <header><span class="section-number">6</span> <h1 data-bookmark-label="6 Parallel exceptions">Parallel exceptions</h1> <span style="float:right"><a href="n4698.html#parallel.exceptions">[parallel.exceptions]</a></span></header>
      
  
    <cxx-section id="parallel.exceptions.behavior">
    

    <section>
      <header><span class="section-number">6.1</span> <h1 data-bookmark-label="6.1 Exception reporting behavior">Exception reporting behavior</h1> <span style="float:right"><a href="n4698.html#parallel.exceptions.behavior">[parallel.exceptions.behavior]</a></span></header>
      
      
        <p id="parallel.exceptions.behavior.1" para_num="1">
          During the execution of a standard parallel algorithm, 
          if temporary memory resources are required and none are available,
          the algorithm throws a <code>std::bad_alloc</code> exception.
        </p>
        <p id="parallel.exceptions.behavior.2" para_num="2">
          During the execution of a standard parallel algorithm, if the invocation of an element access function
          exits via an uncaught exception, the behavior of the program is determined by the type of
          execution policy used to invoke the algorithm:

          </p><ul>
            <li>
              If the execution policy object is of type <code><del>class </del>parallel_vector_execution_policy</code><ins>, <code>unsequenced_policy</code>, or <code>vector_policy</code></ins>,
              <code>std::terminate</code> shall be called.
            </li>
            <li>
              If the execution policy object is of type <code>sequential_execution_policy</code> or
              <code>parallel_execution_policy</code>, the execution of the algorithm exits via an
               exception. The exception shall be an <code>exception_list</code> containing all uncaught exceptions thrown during
              the invocations of element access functions, or optionally the uncaught exception if there was only one.<pre></pre>

              <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
                For example, when <code>for_each</code> is executed sequentially,
                if an invocation of the user-provided function object throws an exception, <code>for_each</code> can exit via the uncaught exception, or throw an <code>exception_list</code> containing the original exception.
              
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note><pre></pre>

              <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
                These guarantees imply that, unless the algorithm has failed to allocate memory and
                exits via <code>std::bad_alloc</code>, all exceptions 
thrown during the execution of
                the algorithm are communicated to the caller. It is 
unspecified whether an algorithm implementation will "forge ahead" after
 
                encountering and capturing a user exception.
              
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note><pre></pre>
              <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
                The algorithm may exit via the <code>std::bad_alloc</code>
 exception even if one or more
                user-provided function objects have exited via an 
exception. For example, this can happen when an algorithm fails to 
allocate memory while
                creating or adding elements to the <code>exception_list</code> object.
              
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
            </li>

            <li>
              If the execution policy object is of any other type, the behavior is implementation-defined.
            </li>
          </ul>
        <p id="parallel.exceptions.behavior.3" para_num="3"></p>
    
    </section>
  </cxx-section>
    <cxx-section id="parallel.exceptions.synopsis">
    

    <section>
      <header><span class="section-number">6.2</span> <h1 data-bookmark-label="6.2 Header &lt;experimental/exception_list&gt; synopsis">Header <code>&lt;experimental/exception_list&gt;</code> synopsis</h1> <span style="float:right"><a href="n4698.html#parallel.exceptions.synopsis">[parallel.exceptions.synopsis]</a></span></header>
      
      
      <pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {

  class exception_list : public exception
  {
    public:
      typedef <em>unspecified</em> iterator;
  
      size_t size() const noexcept;
      iterator begin() const noexcept;
      iterator end() const noexcept;

      const char* what() const noexcept override;
  };
}
}
}
}
      </pre>

      <p id="parallel.exceptions.synopsis.1" para_num="1">
        The class <code>exception_list</code> owns a sequence of <code>exception_ptr</code> objects. The parallel
        algorithms may use the <code>exception_list</code> to communicate uncaught exceptions encountered during parallel execution to the
        caller of the algorithm.
      </p>

      <p id="parallel.exceptions.synopsis.2" para_num="2">
        The type <code>exception_list::iterator</code> shall fulfill the requirements of
        <code>ForwardIterator</code>.
      </p>

      <cxx-function id="parallel.exceptions.synopsis.3" para_num="3">
    
    <pre><code><cxx-signature>size_t size() const noexcept;</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.exceptions.synopsis.4" para_num="4">
    
    <dt>Returns:</dt><dd>
          The number of <code>exception_ptr</code> objects contained within the <code>exception_list</code>.
        </dd>
  </cxx-returns>

        <cxx-complexity id="parallel.exceptions.synopsis.5" para_num="5">
    
    <dt>Complexity:</dt><dd>
          Constant time.
        </dd>
  </cxx-complexity>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.exceptions.synopsis.6" para_num="6">
    
    <pre><code><cxx-signature>iterator begin() const noexcept;</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.exceptions.synopsis.7" para_num="7">
    
    <dt>Returns:</dt><dd>
          An iterator referring to the first <code>exception_ptr</code> object contained within the <code>exception_list</code>.
        </dd>
  </cxx-returns>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.exceptions.synopsis.8" para_num="8">
    
    <pre><code><cxx-signature>iterator end() const noexcept;</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.exceptions.synopsis.9" para_num="9">
    
    <dt>Returns:</dt><dd>
          An iterator that is past the end of the owned sequence.
        </dd>
  </cxx-returns>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.exceptions.synopsis.10" para_num="10">
    
    <pre><code><cxx-signature>const char* what() const noexcept override;</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.exceptions.synopsis.11" para_num="11">
    
    <dt>Returns:</dt><dd>
          An implementation-defined NTBS.
        </dd>
  </cxx-returns>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    </section>
  </cxx-clause>

<cxx-clause id="parallel.alg">
    

    <section>
      <header><span class="section-number">7</span> <h1 data-bookmark-label="7 Parallel algorithms">Parallel algorithms</h1> <span style="float:right"><a href="n4698.html#parallel.alg">[parallel.alg]</a></span></header>
      
  

  <cxx-section id="parallel.alg.general">
    

    <section>
      <header><span class="section-number">7.1</span> <h1 data-bookmark-label="7.1 In general">In general</h1> <span style="float:right"><a href="n4698.html#parallel.alg.general">[parallel.alg.general]</a></span></header>
      
    

    This clause describes components that C++ programs may use to perform operations on containers
    and other sequences in parallel.

    <cxx-section id="parallel.alg.general.user">
    

    <section>
      <header><span class="section-number">7.1.1</span> <h1 data-bookmark-label="7.1.1 Requirements on user-provided function objects">Requirements on user-provided function objects</h1> <span style="float:right"><a href="n4698.html#parallel.alg.general.user">[parallel.alg.general.user]</a></span></header>
      
      

     <p id="parallel.alg.general.user.1" para_num="1">
        Function objects passed into parallel algorithms as objects of type <code>BinaryPredicate</code>,
        <code>Compare</code>, and <code>BinaryOperation</code> shall not directly or indirectly modify
        objects via their arguments.
      </p>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.general.exec">
    

    <section>
      <header><span class="section-number">7.1.2</span> <h1 data-bookmark-label="7.1.2 Effect of execution policies on algorithm execution">Effect of execution policies on algorithm execution</h1> <span style="float:right"><a href="n4698.html#parallel.alg.general.exec">[parallel.alg.general.exec]</a></span></header>
      
      

      <p id="parallel.alg.general.exec.1" para_num="1">
        Parallel algorithms have template parameters named <code>ExecutionPolicy</code> which describe
        the manner in which the execution of these algorithms may be parallelized and the manner in
        which they apply the element access functions.
      </p>

      <p id="parallel.alg.general.exec.2" para_num="2">
        The invocations of element access functions in parallel algorithms invoked with an execution
        policy object of type <code>sequential_execution_policy</code> execute in sequential order in
        the calling thread.
      </p>

      <p id="parallel.alg.general.exec.3" para_num="3">
        The invocations of element access functions in parallel algorithms invoked with an execution
        policy object of type <code>parallel_execution_policy</code> are permitted to execute in an
        unordered fashion in either the invoking thread or in a thread implicitly created by the library
        to support parallel algorithm execution. Any such invocations executing in the same thread are
        indeterminately sequenced with respect to each other. 

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          It is the caller's responsibility to ensure correctness, for example that the invocation does
          not introduce data races or deadlocks.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      </p>

      <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    <pre>using namespace std::experimental::parallel;
int a[] = {0,1};
std::vector&lt;int&gt; v;
for_each(par, std::begin(a), std::end(a), [&amp;](int i) {
  v.push_back(i*2+1);
});
</pre>

        The program above has a data race because of the unsynchronized access to the container
        <code>v</code>.
      
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example><pre></pre>

      <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    <pre>using namespace std::experimental::parallel;
std::atomic&lt;int&gt; x = 0;
int a[] = {1,2};
for_each(par, std::begin(a), std::end(a), [&amp;](int n) {
  x.fetch_add(1, std::memory_order_relaxed);
  // spin wait for another iteration to change the value of x
  while (x.load(std::memory_order_relaxed) == 1) { }
});</pre>

        The above example depends on the order of execution of the iterations, and is therefore
        undefined (may deadlock).
      
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example><pre></pre>

      <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    <pre>using namespace std::experimental::parallel;
int x=0;
std::mutex m;
int a[] = {1,2};
for_each(par, std::begin(a), std::end(a), [&amp;](int) {
  m.lock();
  ++x;
  m.unlock();
});</pre>

        The above example synchronizes access to object <code>x</code> ensuring that it is
        incremented correctly.
      
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example>

      <ins>
      <p>
        The invocations of element access functions in parallel algorithms invoked with an
        execution policy of type <code>unsequenced_policy</code> are permitted to execute
        in an unordered fashion in the calling thread, unsequenced with respect to one another
        within the calling thread.

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          This means that multiple function object invocations may be interleaved on a single thread.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </p><pre></pre>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          This overrides the usual guarantee from the C++ standard, Section 1.9 [intro.execution] that
          function executions do not interleave with one another.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p></p>
      </ins>

      <ins>
      <p>
        The invocations of element access functions in parallel algorithms invoked with an
        executino policy of type <code>vector_policy</code> are permitted to execute
        in an unordered fashion in the calling thread, unsequenced with respect to one another
        within the calling thread, subject to the sequencing constraints of wavefront application
        (<cxx-ref to="parallel.alg.general.wavefront"><a title="parallel.alg.general.wavefront" href="n4698.html#parallel.alg.general.wavefront">7.1.3</a></cxx-ref>) for the last argument to
        <code>for_loop</code> or <code>for_loop_strided</code>.
      </p>
      </ins>

      <p id="parallel.alg.general.exec.4" para_num="4">
        The invocations of element access functions in parallel algorithms invoked with an execution
        policy of type <code>parallel_vector_execution_policy</code>
        are permitted to execute in an unordered fashion in unspecified threads, and unsequenced
        with respect to one another within each thread.
        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          This means that multiple function object invocations may be interleaved on a single thread.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </p><pre></pre>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          This overrides the usual guarantee from the C++ standard, Section 1.9 [intro.execution] that
          function executions do not interleave with one another.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        <pre></pre>

          Since <code>parallel_vector_execution_policy</code> allows the execution of element access functions to be
          interleaved on a single thread, synchronization, including the use of mutexes, risks deadlock. Thus the
          synchronization with <code>parallel_vector_execution_policy</code> is restricted as follows:<pre></pre>

          A standard library function is <em>vectorization-unsafe</em> if it is specified to synchronize with
          another function invocation, or another function invocation is specified to synchronize with it, and if
          it is not a memory allocation or deallocation function. Vectorization-unsafe standard library functions
          may not be invoked by user code called from <code>parallel_vector_execution_policy</code> algorithms.<pre></pre>

          <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
            Implementations must ensure that internal synchronization inside standard library routines does not
            induce deadlock.
          
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p id="parallel.alg.general.exec.5" para_num="5"></p>

      <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    <pre>using namespace std::experimental::parallel;
int x=0;
std::mutex m;
int a[] = {1,2};
for_each(par_vec, std::begin(a), std::end(a), [&amp;](int) {
  m.lock();
  ++x;
  m.unlock();
});</pre>

        The above program is invalid because the applications of the function object are not
        guaranteed to run on different threads.
      
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example><pre></pre>

      <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
        The application of the function object may result in two consecutive calls to
        <code>m.lock</code> on the same thread, which may deadlock.
      
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note><pre></pre>

      <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
        The semantics of the <code>parallel_execution_policy</code> or the
        <code>parallel_vector_execution_policy</code> invocation allow the implementation to fall back to
        sequential execution if the system cannot parallelize an algorithm invocation due to lack of
        resources.
      
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>

      <p id="parallel.alg.general.exec.6" para_num="6">
        Algorithms invoked with an execution policy object of type <code>execution_policy</code>
        execute internally as if invoked with the contained execution policy object.
      </p>

      <p id="parallel.alg.general.exec.7" para_num="7">
        The semantics of parallel algorithms invoked with an execution policy object of
        implementation-defined type are implementation-defined.
      </p>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.general.wavefront">
    

    <section>
      <header><span class="section-number">7.1.3</span> <h1 data-bookmark-label="7.1.3 Wavefront Application">Wavefront Application</h1> <span style="float:right"><a href="n4698.html#parallel.alg.general.wavefront">[parallel.alg.general.wavefront]</a></span></header>
      
      
      <ins>
      <p>
        For the purposes of this section, an <i>evaluation</i> is a value computation or side effect of
        an expression, or an execution of a statement. Initialization of a temporary object is considered a
        subexpression of the expression that necessitates the temporary object.
      </p>

      <p>
        An evaluation A <i>contains</i> an evaluation B if:

        </p><ul>
        <li>A and B are not potentially concurrent ([intro.races]); and</li>
        <li>the start of A is the start of B or the start of A is sequenced before the start of B; and</li>
        <li>the completion of B is the completion of A or the completion of B is sequenced before the completion of A.</li>
        </ul>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    This includes evaluations occurring in function invocations.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p></p>

      <p>
        An evaluation A is <i>ordered before</i> an evaluation B if A is deterministically
        sequenced before B. <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    If A is indeterminately sequenced with respect to B
        or A and B are unsequenced, then A is not ordered before B and B is not ordered
        before A. The ordered before relationship is transitive.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      </p>

      <p>
        For an evaluation A ordered before an evaluation B, both contained in the same
        invocation of an element access function, A is a <i>vertical antecedent</i> of B if:

        </p><ul>
        <li>there exists an evaluation S such that:
          <ul>
            <li>S contains A, and</li>
            <li>S contains all evaluations C (if any) such that A is ordered before C and C is ordered before B,</li>
            <li>but S does not contain B, and</li>
          </ul>
        </li>
        <li>
          control reached B from A without executing any of the following:
          <ul>
            <li>a <code>goto</code> statement or <code>asm</code> declaration that jumps to a statement outside of S, or</li>
            <li>a <code>switch</code> statement executed within S that transfers control into a substatement of a nested selection or iteration statement, or</li>
            <li>a <code>throw</code> <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    even if caught
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>, or</li>
            <li>a <code>longjmp</code>.
          </li></ul>
        </li>
        </ul>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          Vertical antecedent is an irreflexive, antisymmetric, nontransitive relationship between two evaluations.
          Informally, A is a vertical antecedent of B if A is sequenced immediately before B or A is nested zero or
          more levels within a statement S that immediately precedes B.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p></p>

      <p>
        In the following, <i>X<sub>i</sub></i> and <i>X<sub>j</sub></i> refer to evaluations of the <i>same</i> expression
        or statement contained in the application of an element access function corresponding to the i<sup>th</sup> and
        j<sup>th</sup> elements of the input sequence. <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    There might be several evaluations <i>X<sub>k</sub></i>,
        <i>Y<sub>k</sub></i>, etc. of a single expression or statement in application <i>k</i>, for example, if the
        expression or statement appears in a loop within the element access function.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      </p>

      <p>
        <i>Horizontally matched</i> is an equivalence relationship between two evaluations of the same expression. An
        evaluation B<sub>i</sub> is <i>horizontally matched</i> with an evaluation B<sub>j</sub> if:

        </p><ul>
          <li>both are the first evaluations in their respective applications of the element access function, or</li>
          <li>there exist horizontally matched evaluations A<sub>i</sub> and A<sub>j</sub> that are vertical antecedents of evaluations B<sub>i</sub> and B<sub>j</sub>, respectively.
        </li></ul>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          <i>Horizontally matched</i> establishes a theoretical <i>lock-step</i> relationship between evaluations in different applications of an element access function.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p></p>

      <p>
        Let <i>f</i> be a function called for each argument list in a sequence of argument lists.
        <i>Wavefront application</i> of <i>f</i> requires that evaluation A<sub>i</sub> be sequenced
        before evaluation B<sub>i</sub> if i &lt; j and and:

        </p><ul>
          <li>A<sub>i</sub> is sequenced before some evaluation B<sub>i</sub> and B<sub>i</sub> is horizontally matched with B<sub>j</sub>, or</li>
          <li>A<sub>i</sub> is horizontally matched with some evaluation A<sub>j</sub> and A<sub>j</sub> is sequenced before B<sub>j<sub>.</sub></sub></li>
        </ul>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          <i>Wavefront application</i> guarantees that parallel applications i and j execute such that progress on application j never gets <i>ahead</i> of application i.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          The relationships between A<sub>i</sub> and B<sub>i</sub> and between A<sub>j</sub> and B<sub>j</sub> are <i>sequenced before</i>, not <i>vertical antecedent</i>.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      <p></p>
      </ins>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.overloads">
    

    <section>
      <header><span class="section-number">7.1.4</span> <h1 data-bookmark-label="7.1.4 ExecutionPolicy algorithm overloads"><code>ExecutionPolicy</code> algorithm overloads</h1> <span style="float:right"><a href="n4698.html#parallel.alg.overloads">[parallel.alg.overloads]</a></span></header>
      
      

      <p id="parallel.alg.overloads.1" para_num="1">
        The Parallel Algorithms Library provides overloads for each of the algorithms named in
        Table 1, corresponding to the algorithms with the same name in the C++ Standard Algorithms Library.
        
        For each algorithm in <cxx-ref to="tab.parallel.algorithms"><a title="tab.parallel.algorithms" href="n4698.html#tab.parallel.algorithms">Table 3</a></cxx-ref>, if there are overloads for
        corresponding algorithms with the same name
        in the C++ Standard Algorithms Library,
        the overloads shall have an additional template type parameter named
        <code>ExecutionPolicy</code>, which shall be the first template parameter.
        
        In addition, each such overload shall have the new function parameter as the
        first function parameter of type <code>ExecutionPolicy&amp;&amp;</code>.
      </p>

      <p id="parallel.alg.overloads.2" para_num="2">
        Unless otherwise specified, the semantics of <code>ExecutionPolicy</code> algorithm overloads
        are identical to their overloads without.
      </p>
        
      <p id="parallel.alg.overloads.3" para_num="3">
        Parallel algorithms shall not participate in overload resolution unless
        <code>is_execution_policy&lt;decay_t&lt;ExecutionPolicy&gt;&gt;::value</code> is <code>true</code>.
      </p>
        
      <table is="cxx-table" id="tab.parallel.algorithms" class="list" role="presentation">
    

    <caption>Table 3 — <wbr><span>Table of parallel algorithms</span></caption>
    
        
          <tbody><tr>
            <td><code>adjacent_difference</code></td>
            <td><code>adjacent_find</code></td>
            <td><code>all_of</code></td>
            <td><code>any_of</code></td>
          </tr>
          <tr>
            <td><code>copy</code></td>
            <td><code>copy_if</code></td>
            <td><code>copy_n</code></td>
            <td><code>count</code></td>
          </tr>
          <tr>
            <td><code>count_if</code></td>
            <td><code>equal</code></td>
            <td><code>exclusive_scan</code></td>
            <td><code>fill</code></td>
          </tr>
          <tr>
            <td><code>fill_n</code></td>
            <td><code>find</code></td>
            <td><code>find_end</code></td>
            <td><code>find_first_of</code></td>
          </tr>
          <tr>
            <td><code>find_if</code></td>
            <td><code>find_if_not</code></td>
            <td><code>for_each</code></td>
            <td><code>for_each_n</code></td>
          </tr>
          <tr>
            <td><code>generate</code></td>
            <td><code>generate_n</code></td>
            <td><code>includes</code></td>
            <td><code>inclusive_scan</code></td>
          </tr>
          <tr>
            <td><code>inner_product</code></td>
            <td><code>inplace_merge</code></td>
            <td><code>is_heap</code></td>
            <td><code>is_heap_until</code></td>
          </tr>
          <tr>
            <td><code>is_partitioned</code></td>
            <td><code>is_sorted</code></td>
            <td><code>is_sorted_until</code></td>
            <td><code>lexicographical_compare</code></td>
          </tr>
          <tr>
            <td><code>max_element</code></td>
            <td><code>merge</code></td>
            <td><code>min_element</code></td>
            <td><code>minmax_element</code></td>
          </tr>
          <tr>
            <td><code>mismatch</code></td>
            <td><code>move</code></td>
            <td><code>none_of</code></td>
            <td><code>nth_element</code></td>
          </tr>
          <tr>
            <td><code>partial_sort</code></td>
            <td><code>partial_sort_copy</code></td>
            <td><code>partition</code></td>
            <td><code>partition_copy</code></td>
          </tr>
          <tr>
            <td><code>reduce</code></td>
            <td><code>remove</code></td>
            <td><code>remove_copy</code></td>
            <td><code>remove_copy_if</code></td>
          </tr>
          <tr>
            <td><code>remove_if</code></td>
            <td><code>replace</code></td>
            <td><code>replace_copy</code></td>
            <td><code>replace_copy_if</code></td>
          </tr>
          <tr>
            <td><code>replace_if</code></td>
            <td><code>reverse</code></td>
            <td><code>reverse_copy</code></td>
            <td><code>rotate</code></td>
          </tr>
          <tr>
            <td><code>rotate_copy</code></td>
            <td><code>search</code></td>
            <td><code>search_n</code></td>
            <td><code>set_difference</code></td>
          </tr>
          <tr>
            <td><code>set_intersection</code></td>
            <td><code>set_symmetric_difference</code></td>
            <td><code>set_union</code></td>
            <td><code>sort</code></td>
          </tr>
          <tr>
            <td><code>stable_partition</code></td>
            <td><code>stable_sort</code></td>
            <td><code>swap_ranges</code></td>
            <td><code>transform</code></td>
          </tr>
          <tr>
            <td><code>transform_exclusive_scan</code></td>
            <td><code>transform_inclusive_scan</code></td>
            <td><code>transform_reduce</code></td>
            <td><code>uninitialized_copy</code></td>
          </tr>
          <tr>
            <td><code>uninitialized_copy_n</code></td>
            <td><code>uninitialized_fill</code></td>
            <td><code>uninitialized_fill_n</code></td>
            <td><code>unique</code></td>
          </tr>
          <tr>
            <td><code>unique_copy</code></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
      </tbody>
  </table>

      <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
      Not all algorithms in the Standard Library have counterparts in <cxx-ref to="tab.parallel.algorithms"><a title="tab.parallel.algorithms" href="n4698.html#tab.parallel.algorithms">Table 3</a></cxx-ref>.
      
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
    
    </section>
  </cxx-section>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.alg.defns">
    

    <section>
      <header><span class="section-number">7.2</span> <h1 data-bookmark-label="7.2 Definitions">Definitions</h1> <span style="float:right"><a href="n4698.html#parallel.alg.defns">[parallel.alg.defns]</a></span></header>
      
    

    <p id="parallel.alg.defns.1" para_num="1">
      Define <code><em>GENERALIZED_SUM</em>(op, a1, ..., aN)</code> as follows:

      </p><ul>
        <li><code>a1</code> when <code>N</code> is <code>1</code></li>
      
        <li>
          <code>op(<em>GENERALIZED_SUM</em>(op, b1, ..., bK)</code>, <code><em>GENERALIZED_SUM</em>(op, bM, ..., bN))</code> where
           
          <ul>
            <li><code>b1, ..., bN</code> may be any permutation of <code>a1, ..., aN</code> and</li>

            <li><code>1 &lt; K+1 = M ≤ N</code>.</li>
          </ul>
        </li>
      </ul>
    <p id="parallel.alg.defns.2" para_num="2"></p>

    <p id="parallel.alg.defns.3" para_num="3">
      Define <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(op, a1, ..., aN)</code> as follows:

      </p><ul>
        <li><code>a1</code> when <code>N</code> is <code>1</code></li>

        <li>
          <code>op(<em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(op, a1, ..., aK), <em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(op, aM, </code><br>
          <code>..., aN)</code> where <code>1 &lt; K+1 = M ≤ N</code>.
        </li>
      </ul>
    <p id="parallel.alg.defns.4" para_num="4"></p>
  
    </section>
  </cxx-section>

  <cxx-section id="parallel.alg.ops">
    

    <section>
      <header><span class="section-number">7.3</span> <h1 data-bookmark-label="7.3 Non-Numeric Parallel Algorithms">Non-Numeric Parallel Algorithms</h1> <span style="float:right"><a href="n4698.html#parallel.alg.ops">[parallel.alg.ops]</a></span></header>
      
    

    <cxx-section id="parallel.alg.ops.synopsis">
    

    <section>
      <header><span class="section-number">7.3.1</span> <h1 data-bookmark-label="7.3.1 Header &lt;experimental/algorithm&gt; synopsis">Header <code>&lt;experimental/algorithm&gt;</code> synopsis</h1> <span style="float:right"><a href="n4698.html#parallel.alg.ops.synopsis">[parallel.alg.ops.synopsis]</a></span></header>
      
      

      <pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {
  template&lt;class ExecutionPolicy,
           class InputIterator, class Function&gt;
    void for_each(ExecutionPolicy&amp;&amp; exec,
                  InputIterator first, InputIterator last,
                  Function f);
  template&lt;class InputIterator, class Size, class Function&gt;
    InputIterator for_each_n(InputIterator first, Size n,
                             Function f);
  template&lt;class ExecutionPolicy,
           class InputIterator, class Size, class Function&gt;
    InputIterator for_each_n(ExecutionPolicy&amp;&amp; exec,
                             InputIterator first, Size n,
                             Function f);

<ins>namespace execution {
  <cxx-ref insynopsis="" to="parallel.alg.novec">// <i><a title="parallel.alg.novec" href="n4698.html#parallel.alg.novec">7.3.3</a>, No vec</i></cxx-ref>
  template&lt;class F&gt;
    auto no_vec(F&amp;&amp; f) noexcept -&gt; decltype(std::forward&lt;F&gt;(f)());

  <cxx-ref insynopsis="" to="parallel.alg.ordupdate.class">// <i><a title="parallel.alg.ordupdate.class" href="n4698.html#parallel.alg.ordupdate.class">7.3.4</a>, Ordered update class</i></cxx-ref>
  template&lt;class T&gt;
    class ordered_update_t;

  <cxx-ref insynopsis="" to="parallel.alg.ordupdate.func">// <i><a title="parallel.alg.ordupdate.func" href="n4698.html#parallel.alg.ordupdate.func">7.3.5</a>, Ordered update function template</i></cxx-ref>
  template&lt;class T&gt;
    ordered_update_t&lt;T&gt; ordered_update(T&amp; ref) noexcept;
}</ins>
}
}
}
}
</pre>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.foreach">
    

    <section>
      <header><span class="section-number">7.3.2</span> <h1 data-bookmark-label="7.3.2 For each">For each</h1> <span style="float:right"><a href="n4698.html#parallel.alg.foreach">[parallel.alg.foreach]</a></span></header>
      
      

      <cxx-function id="parallel.alg.foreach.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class ExecutionPolicy,
      class InputIterator, class Function&gt;
void for_each(ExecutionPolicy&amp;&amp; exec,
              InputIterator first, InputIterator last,
              Function f);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.foreach.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Applies <code>f</code> to the result of dereferencing every iterator in the range <code>[first,last)</code>.

          <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
            If the type of <code>first</code> satisfies the requirements of a mutable iterator, <code>f</code> may
            apply nonconstant functions through the dereferenced iterator.
          
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </dd>
  </cxx-effects>

        <cxx-complexity id="parallel.alg.foreach.3" para_num="3">
    
    <dt>Complexity:</dt><dd>
          Applies <code>f</code> exactly <code>last - first</code> times.
        </dd>
  </cxx-complexity>
        
        <cxx-remarks id="parallel.alg.foreach.4" para_num="4">
    
    <dt>Remarks:</dt><dd>
          If <code>f</code> returns a result, the result is ignored.
        </dd>
  </cxx-remarks>

        <cxx-notes id="parallel.alg.foreach.5" para_num="5">
    
    <dt>Notes:</dt><dd>
          Unlike its sequential form, the parallel overload of <code>for_each</code> does not return a copy of
          its <code>Function</code> parameter, since parallelization may not permit efficient state
          accumulation.
        </dd>
  </cxx-notes>
        <cxx-requires id="parallel.alg.foreach.6" para_num="6">
    
    <dt>Requires:</dt><dd>
          Unlike its sequential form, the parallel overload of <code>for_each</code> requires
          <code>Function</code> to meet the requirements of <code>CopyConstructible</code>.
        </dd>
  </cxx-requires>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.foreach.7" para_num="7">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class Size, class Function&gt;
InputIterator for_each_n(InputIterator first, Size n,
                         Function f);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-requires id="parallel.alg.foreach.8" para_num="8">
    
    <dt>Requires:</dt><dd>
          <code>Function</code> shall meet the requirements of <code>MoveConstructible</code>
          
          <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
            <code>Function</code> need not meet the requirements of <code>CopyConstructible</code>.
          
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </dd>
  </cxx-requires>

        <cxx-effects id="parallel.alg.foreach.9" para_num="9">
    
    <dt>Effects:</dt><dd>
          Applies <code>f</code> to the result of dereferencing every iterator in the range
          <code>[first,first + n)</code>, starting from <code>first</code> and proceeding to <code>first + n - 1</code>.

          <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
            If the type of <code>first</code> satisfies the requirements of a mutable iterator,
            <code>f</code> may apply nonconstant functions through the dereferenced iterator.
          
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.foreach.10" para_num="10">
    
    <dt>Returns:</dt><dd>
          <code>first + n</code> for non-negative values of <code>n</code> and <code>first</code> for negative values.
        </dd>
  </cxx-returns>

        <cxx-remarks id="parallel.alg.foreach.11" para_num="11">
    
    <dt>Remarks:</dt><dd>
          If <code>f</code> returns a result, the result is ignored.
        </dd>
  </cxx-remarks>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.foreach.12" para_num="12">
    
    <pre><code><cxx-signature>template&lt;class ExecutionPolicy,
      class InputIterator, class Size, class Function&gt;
InputIterator for_each_n(ExecutionPolicy &amp;&amp; exec,
                         InputIterator first, Size n,
                         Function f);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.foreach.13" para_num="13">
    
    <dt>Effects:</dt><dd>
          Applies <code>f</code> to the result of dereferencing every iterator in the range
          <code>[first,first + n)</code>, starting from <code>first</code> and proceeding to <code>first + n - 1</code>.

          <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
            If the type of <code>first</code> satisfies the requirements of a mutable iterator,
            <code>f</code> may apply nonconstant functions through the dereferenced iterator.
          
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.foreach.14" para_num="14">
    
    <dt>Returns:</dt><dd>
        <code>first + n</code> for non-negative values of <code>n</code> and <code>first</code> for negative values.
        </dd>
  </cxx-returns>

        <cxx-remarks id="parallel.alg.foreach.15" para_num="15">
    
    <dt>Remarks:</dt><dd>
          If <code>f</code> returns a result, the result is ignored.
        </dd>
  </cxx-remarks>

        <cxx-notes id="parallel.alg.foreach.16" para_num="16">
    
    <dt>Notes:</dt><dd>
          Unlike its sequential form, the parallel overload of <code>for_each_n</code> requires
          <code>Function</code> to meet the requirements of <code>CopyConstructible</code>.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.novec">
    

    <section>
      <header><span class="section-number">7.3.3</span> <h1 data-bookmark-label="7.3.3 No vec">No vec</h1> <span style="float:right"><a href="n4698.html#parallel.alg.novec">[parallel.alg.novec]</a></span></header>
      
      

      <ins>
      <cxx-function>
    
    <pre><code><cxx-signature>template&lt;class F&gt;
auto no_vec(F&amp;&amp; f) noexcept -&gt; decltype(std::forward&lt;F&gt;(f)());</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects>
    
    <dt>Effects:</dt><dd>
          Evaluates <code>std::forward&gt;F&lt;(f)()</code>. When invoked within an element access function
          in a parallel algorithm using <code>vector_policy</code>, if two calls to <code>no_vec</code> are
          horizontally matched within a wavefront application of an element access function over input
          sequence S, then the execution of <code>f</code> in the application for one element in S is
          sequenced before the execution of <code>f</code> in the application for a subsequent element in
          S; otherwise, there is no effect on sequencing.
        </dd>
  </cxx-effects>

        <cxx-returns>
    
    <dt>Returns:</dt><dd>
          the result of <code>f</code>.
        </dd>
  </cxx-returns>
        
        <cxx-remarks>
    
    <dt>Remarks:</dt><dd>
          If <code>f</code> returns a result, the result is ignored.
        </dd>
  </cxx-remarks>

        <cxx-notes>
    
    <dt>Notes:</dt><dd>
          If <code>f</code> exits via an exception, then <code>terminate</code> will be called, consistent
          with all other potentially-throwing operations invoked with <code>vector_policy</code> execution.

          <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    
            <pre>extern int* p;
for_loop(vec, 0, n[&amp;](int i) {
  y[i] +=y[i+1];
  if(y[i] &lt; 0) {
    no_vec([]{
      *p++ = i;
    });
  }
});</pre>

            The updates <code>*p++ = i</code> will occur in the same order as if the policy were <code>seq</code>.
          
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example>
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
      </ins>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.ordupdate.class">
    

    <section>
      <header><span class="section-number">7.3.4</span> <h1 data-bookmark-label="7.3.4 Ordered update class">Ordered update class</h1> <span style="float:right"><a href="n4698.html#parallel.alg.ordupdate.class">[parallel.alg.ordupdate.class]</a></span></header>
      
      

      <ins>
<pre>class ordered_update_t {
  T&amp; ref_; // exposition only
public:
  ordered_update_t(T&amp; loc) noexcept
    : ref_(loc) {}
  ordered_update_t(const ordered_update_t&amp;) = delete;
  ordered_update_t&amp; operator=(const ordered_update_t&amp;) = delete;

  template &lt;class U&gt;
    auto operator=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ = std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator+=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ += std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator-=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ -= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator*=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ *= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator/=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ /= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator%=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ %= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator&gt;&gt;=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ &gt;&gt;= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator&lt;&lt;=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ &lt;&lt;= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator&amp;=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ &amp;= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator^=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ ^= std::move(rhs); }); }
  template &lt;class U&gt;
    auto operator|=(U rhs) const noexcept
      { return no_vec([&amp;]{ return ref_ |= std::move(rhs); }); }

  auto operator++() const noexcept
    { return no_vec([&amp;]{ return ++ref_; }); }
  auto operator++(int) const noexcept
    { return no_vec([&amp;]{ return ref_++; }); }
  auto operator--() const noexcept
    { return no_vec([&amp;]{ return --ref_; }); }
  auto operator--(int) const noexcept
    { return no_vec([&amp;]{ return ref_--; }); }
};
</pre>

      <p>
        An object of type <code>ordered_update_t&gt;T&lt;</code> is a proxy for an object of type T
        intended to be used within a parallel application of an element access function using a
        policy object of type <code>vector_policy</code>. Simple increments, assignments, and compound
        assignments to the object are forwarded to the proxied object, but are sequenced as though
        executed within a <code>no_vec</code> invocation.

        <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
          The return-value deduction of the forwarded operations results in these operations returning by
          value, not reference. This formulation prevents accidental collisions on accesses to the return
          value.
        
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
      </p>
      </ins>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.ordupdate.func">
    

    <section>
      <header><span class="section-number">7.3.5</span> <h1 data-bookmark-label="7.3.5 Ordered update function template">Ordered update function template</h1> <span style="float:right"><a href="n4698.html#parallel.alg.ordupdate.func">[parallel.alg.ordupdate.func]</a></span></header>
      
      
      <ins>

      <cxx-function>
    
    <pre><code><cxx-signature>template&lt;T&gt;
ordered_update_t&lt;T&gt; ordered_update(T&amp; loc) noexcept;</cxx-signature></code></pre>

    <dl>
      
        
      
    </dl>
  </cxx-function>

      <cxx-returns>
    
    <dt>Returns:</dt><dd>
        <code>{ loc }</code>.
      </dd>
  </cxx-returns>

      </ins>
    
    </section>
  </cxx-section>
  
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.numeric">
    

    <section>
      <header><span class="section-number">7.4</span> <h1 data-bookmark-label="7.4 Numeric Parallel Algorithms">Numeric Parallel Algorithms</h1> <span style="float:right"><a href="n4698.html#parallel.alg.numeric">[parallel.alg.numeric]</a></span></header>
      
    

    <cxx-section id="parallel.alg.numeric.synopsis">
    

    <section>
      <header><span class="section-number">7.4.1</span> <h1 data-bookmark-label="7.4.1 Header &lt;experimental/numeric&gt; synopsis">Header <code>&lt;experimental/numeric&gt;</code> synopsis</h1> <span style="float:right"><a href="n4698.html#parallel.alg.numeric.synopsis">[parallel.alg.numeric.synopsis]</a></span></header>
      
      

      <pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {
  template&lt;class InputIterator&gt;
    typename iterator_traits&lt;InputIterator&gt;::value_type
      reduce(InputIterator first, InputIterator last);
  template&lt;class ExecutionPolicy,
           class InputIterator&gt;
    typename iterator_traits&lt;InputIterator&gt;::value_type
      reduce(ExecutionPolicy&amp;&amp; exec,
             InputIterator first, InputIterator last);
  template&lt;class InputIterator, class T&gt;
    T reduce(InputIterator first, InputIterator last, T init);
  template&lt;class ExecutionPolicy,
           class InputIterator, class T&gt;
    T reduce(ExecutionPolicy&amp;&amp; exec,
             InputIterator first, InputIterator last, T init);
  template&lt;class InputIterator, class T, class BinaryOperation&gt;
    T reduce(InputIterator first, InputIterator last, T init,
             BinaryOperation binary_op);
  template&lt;class ExecutionPolicy, class InputIterator, class T, class BinaryOperation&gt;
    T reduce(ExecutionPolicy&amp;&amp; exec,
             InputIterator first, InputIterator last, T init,
             BinaryOperation binary_op);

  template&lt;class InputIterator, class OutputIterator,
           class T&gt;
    OutputIterator
      exclusive_scan(InputIterator first, InputIterator last,
                     OutputIterator result,
                     T init);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class T&gt;
    OutputIterator
      exclusive_scan(ExecutionPolicy&amp;&amp; exec,
                     InputIterator first, InputIterator last,
                     OutputIterator result,
                     T init);
  template&lt;class InputIterator, class OutputIterator,
           class T, class BinaryOperation&gt;
    OutputIterator
      exclusive_scan(InputIterator first, InputIterator last,
                     OutputIterator result,
                     T init, BinaryOperation binary_op);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class T, class BinaryOperation&gt;
    OutputIterator
      exclusive_scan(ExecutionPolicy&amp;&amp; exec,
                     InputIterator first, InputIterator last,
                     OutputIterator result,
                     T init, BinaryOperation binary_op);

  template&lt;class InputIterator, class OutputIterator&gt;
    OutputIterator
      inclusive_scan(InputIterator first, InputIterator last,
                     OutputIterator result);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator&gt;
    OutputIterator
      inclusive_scan(ExecutionPolicy&amp;&amp; exec,
                     InputIterator first, InputIterator last,
                     OutputIterator result);
  template&lt;class InputIterator, class OutputIterator,
           class BinaryOperation&gt;
    OutputIterator
      inclusive_scan(InputIterator first, InputIterator last,
                     OutputIterator result,
                     BinaryOperation binary_op);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class BinaryOperation&gt;
    OutputIterator
      inclusive_scan(ExecutionPolicy&amp;&amp; exec,
                     InputIterator first, InputIterator last,
                     OutputIterator result,
                     BinaryOperation binary_op);
  template&lt;class InputIterator, class OutputIterator,
           class BinaryOperation, class T&gt;
    OutputIterator
      inclusive_scan(InputIterator first, InputIterator last,
                     OutputIterator result,
                     BinaryOperation binary_op, T init);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class BinaryOperation, class T&gt;
    OutputIterator
      inclusive_scan(ExecutionPolicy&amp;&amp; exec,
                     InputIterator first, InputIterator last,
                     OutputIterator result,
                     BinaryOperation binary_op, T init);

  template&lt;class InputIterator, class UnaryOperation,
           class T, class BinaryOperation&gt;
    T transform_reduce(InputIterator first, InputIterator last,
                       UnaryOperation unary_op,
                       T init, BinaryOperation binary_op);
  template&lt;class ExecutionPolicy,
           class InputIterator, class UnaryOperation,
           class T, class BinaryOperation&gt;
    T transform_reduce(ExecutionPolicy&amp;&amp; exec,
                       InputIterator first, InputIterator last,
                       UnaryOperation unary_op,
                       T init, BinaryOperation binary_op);

  template&lt;class InputIterator, class OutputIterator,
           class UnaryOperation, class T, class BinaryOperation&gt;
    OutputIterator
      transform_exclusive_scan(InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               T init, BinaryOperation binary_op);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class UnaryOperation, class T, class BinaryOperation&gt;
    OutputIterator
      transform_exclusive_scan(ExecutionPolicy&amp;&amp; exec,
                               InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               T init, BinaryOperation binary_op);

  template&lt;class InputIterator, class OutputIterator,
           class UnaryOperation, class BinaryOperation&gt;
    OutputIterator
      transform_inclusive_scan(InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               BinaryOperation binary_op);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class UnaryOperation, class BinaryOperation&gt;
    OutputIterator
      transform_inclusive_scan(ExecutionPolicy&amp;&amp; exec,
                               InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               BinaryOperation binary_op);

  template&lt;class InputIterator, class OutputIterator,
           class UnaryOperation, class BinaryOperation, class T&gt;
    OutputIterator
      transform_inclusive_scan(InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               BinaryOperation binary_op, T init);
  template&lt;class ExecutionPolicy,
           class InputIterator, class OutputIterator,
           class UnaryOperation, class BinaryOperation, class T&gt;
    OutputIterator
      transform_inclusive_scan(ExecutionPolicy&amp;&amp; exec,
                               InputIterator first, InputIterator last,
                               OutputIterator result,
                               UnaryOperation unary_op,
                               BinaryOperation binary_op, T init);
}
}
}
}
</pre>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.reduce">
    

    <section>
      <header><span class="section-number">7.4.2</span> <h1 data-bookmark-label="7.4.2 Reduce">Reduce</h1> <span style="float:right"><a href="n4698.html#parallel.alg.reduce">[parallel.alg.reduce]</a></span></header>
      
      

      <cxx-function id="parallel.alg.reduce.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator&gt;
typename iterator_traits&lt;InputIterator&gt;::value_type
    reduce(InputIterator first, InputIterator last);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.reduce.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Same as <code>reduce(first, last, typename iterator_traits&lt;InputIterator&gt;::value_type{})</code>.
        </dd>
  </cxx-effects>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.reduce.3" para_num="3">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class T&gt;
T reduce(InputIterator first, InputIterator last, T init);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.reduce.4" para_num="4">
    
    <dt>Effects:</dt><dd>
          Same as <code>reduce(first, last, init, plus&lt;&gt;())</code>.
        </dd>
  </cxx-effects>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.reduce.5" para_num="5">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class T, class BinaryOperation&gt;
T reduce(InputIterator first, InputIterator last, T init,
         BinaryOperation binary_op);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.alg.reduce.6" para_num="6">
    
    <dt>Returns:</dt><dd>
          <code><em>GENERALIZED_SUM</em>(binary_op, init, *first, ..., *(first + (last - first) - 1))</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.reduce.7" para_num="7">
    
    <dt>Requires:</dt><dd>
          <code>binary_op</code> shall not invalidate iterators or subranges, nor modify elements in the
          range <code>[first,last)</code>.
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.reduce.8" para_num="8">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications of <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.reduce.9" para_num="9">
    
    <dt>Notes:</dt><dd>
          The primary difference between <code>reduce</code> and <code>accumulate</code> is that the behavior
          of <code>reduce</code> may be non-deterministic for non-associative or non-commutative <code>binary_op</code>.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.exclusive.scan">
    

    <section>
      <header><span class="section-number">7.4.3</span> <h1 data-bookmark-label="7.4.3 Exclusive scan">Exclusive scan</h1> <span style="float:right"><a href="n4698.html#parallel.alg.exclusive.scan">[parallel.alg.exclusive.scan]</a></span></header>
      
      

      <cxx-function id="parallel.alg.exclusive.scan.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator, class T&gt;
OutputIterator exclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result,
                              T init);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.exclusive.scan.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Same as <code>exclusive_scan(first, last, result, init, plus&lt;&gt;())</code>.
        </dd>
  </cxx-effects>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.exclusive.scan.3" para_num="3">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator, class T, class BinaryOperation&gt;
OutputIterator exclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result,
                              T init, BinaryOperation binary_op);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.exclusive.scan.4" para_num="4">
    
    <dt>Effects:</dt><dd>
          Assigns through each iterator <code>i</code> in <code>[result,result + (last - first))</code> the
          value of <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, init, *first, ..., *(first + (i - result) - 1))</code>.
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.exclusive.scan.5" para_num="5">
    
    <dt>Returns:</dt><dd>
          The end of the resulting range beginning at <code>result</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.exclusive.scan.6" para_num="6">
    
    <dt>Requires:</dt><dd>
          <code>binary_op</code> shall not invalidate iterators or subranges, nor modify elements in the
          ranges <code>[first,last)</code> or <code>[result,result + (last - first))</code>.
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.exclusive.scan.7" para_num="7">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications of <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.exclusive.scan.8" para_num="8">
    
    <dt>Notes:</dt><dd>
          The difference between <code>exclusive_scan</code> and <code>inclusive_scan</code> is that
          <code>exclusive_scan</code> excludes the <code>i</code>th input element from the <code>i</code>th
          sum. If <code>binary_op</code> is not mathematically associative, the behavior of
          <code>exclusive_scan</code> may be non-deterministic.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.inclusive.scan">
    

    <section>
      <header><span class="section-number">7.4.4</span> <h1 data-bookmark-label="7.4.4 Inclusive scan">Inclusive scan</h1> <span style="float:right"><a href="n4698.html#parallel.alg.inclusive.scan">[parallel.alg.inclusive.scan]</a></span></header>
      
      

      <cxx-function id="parallel.alg.inclusive.scan.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator&gt;
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.inclusive.scan.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Same as <code>inclusive_scan(first, last, result, plus&lt;&gt;())</code>.
        </dd>
  </cxx-effects>
      
    </dl>
  </cxx-function>

      <cxx-function id="parallel.alg.inclusive.scan.3" para_num="3">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator, class BinaryOperation&gt;
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result,
                              BinaryOperation binary_op);</cxx-signature><cxx-signature>template&lt;class InputIterator, class OutputIterator, class BinaryOperation, class T&gt;
OutputIterator inclusive_scan(InputIterator first, InputIterator last,
                              OutputIterator result,
                              BinaryOperation binary_op, T init);</cxx-signature></code></pre>

    <dl>
      
        
        

        <cxx-effects id="parallel.alg.inclusive.scan.4" para_num="4">
    
    <dt>Effects:</dt><dd>
          Assigns through each iterator <code>i</code> in <code>[result,result + (last - first))</code> the value of
          <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, *first, ..., *(first + (i - result)))</code> or
          <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, init, *first, ..., *(first + (i - result)))</code>
          if <code>init</code> is provided.
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.inclusive.scan.5" para_num="5">
    
    <dt>Returns:</dt><dd>
          The end of the resulting range beginning at <code>result</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.inclusive.scan.6" para_num="6">
    
    <dt>Requires:</dt><dd>
          <code>binary_op</code> shall not invalidate iterators or subranges, nor modify elements in the 
          ranges <code>[first,last)</code> or <code>[result,result + (last - first))</code>.
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.inclusive.scan.7" para_num="7">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications of <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.inclusive.scan.8" para_num="8">
    
    <dt>Notes:</dt><dd>
          The difference between <code>exclusive_scan</code> and <code>inclusive_scan</code> is that
          <code>inclusive_scan</code> includes the <code>i</code>th input element in the <code>i</code>th sum.
          If <code>binary_op</code> is not mathematically associative, the behavior of
          <code>inclusive_scan</code> may be non-deterministic.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.transform.reduce">
    

    <section>
      <header><span class="section-number">7.4.5</span> <h1 data-bookmark-label="7.4.5 Transform reduce">Transform reduce</h1> <span style="float:right"><a href="n4698.html#parallel.alg.transform.reduce">[parallel.alg.transform.reduce]</a></span></header>
      
      

      <cxx-function id="parallel.alg.transform.reduce.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class UnaryFunction, class T, class BinaryOperation&gt;
T transform_reduce(InputIterator first, InputIterator last,
                   UnaryOperation unary_op, T init, BinaryOperation binary_op);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-returns id="parallel.alg.transform.reduce.2" para_num="2">
    
    <dt>Returns:</dt><dd>
          <code><em>GENERALIZED_SUM</em>(binary_op, init, unary_op(*first), ..., unary_op(*(first + (last - first) -</code><br>
          <code>1)))</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.transform.reduce.3" para_num="3">
    
    <dt>Requires:</dt><dd>
          Neither <code>unary_op</code> nor <code>binary_op</code> shall invalidate subranges, or modify elements in the range <code>[first,last)</code>
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.transform.reduce.4" para_num="4">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications each of <code>unary_op</code> and <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.transform.reduce.5" para_num="5">
    
    <dt>Notes:</dt><dd>
          <code>transform_reduce</code> does not apply <code>unary_op</code> to <code>init</code>.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.transform.exclusive.scan">
    

    <section>
      <header><span class="section-number">7.4.6</span> <h1 data-bookmark-label="7.4.6 Transform exclusive scan">Transform exclusive scan</h1> <span style="float:right"><a href="n4698.html#parallel.alg.transform.exclusive.scan">[parallel.alg.transform.exclusive.scan]</a></span></header>
      
      

      <cxx-function id="parallel.alg.transform.exclusive.scan.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator,
      class UnaryOperation,
      class T, class BinaryOperation&gt;
OutputIterator transform_exclusive_scan(InputIterator first, InputIterator last,
                                        OutputIterator result,
                                        UnaryOperation unary_op,
                                        T init, BinaryOperation binary_op);</cxx-signature></code></pre>

    <dl>
      
        

        <cxx-effects id="parallel.alg.transform.exclusive.scan.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Assigns through each iterator <code>i</code> in <code>[result,result + (last - first))</code> the value of
          <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, init, unary_op(*first), ..., unary_op(*(first + (i</code><br>
          <code>- result) - 1)))</code>.
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.transform.exclusive.scan.3" para_num="3">
    
    <dt>Returns:</dt><dd>
          The end of the resulting range beginning at <code>result</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.transform.exclusive.scan.4" para_num="4">
    
    <dt>Requires:</dt><dd>
          Neither <code>unary_op</code> nor <code>binary_op</code> shall invalidate iterators or subranges, or modify elements in the
          ranges <code>[first,last)</code> or <code>[result,result + (last - first))</code>.
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.transform.exclusive.scan.5" para_num="5">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications each of <code>unary_op</code> and <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.transform.exclusive.scan.6" para_num="6">
    
    <dt>Notes:</dt><dd>
          The difference between <code>transform_exclusive_scan</code> and <code>transform_inclusive_scan</code> is that <code>transform_exclusive_scan</code>
          excludes the ith input element from the ith sum. If <code>binary_op</code> is not mathematically associative, the behavior of
          <code>transform_exclusive_scan</code> may be non-deterministic. <code>transform_exclusive_scan</code> does not apply <code>unary_op</code> to <code>init</code>.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>

    <cxx-section id="parallel.alg.transform.inclusive.scan">
    

    <section>
      <header><span class="section-number">7.4.7</span> <h1 data-bookmark-label="7.4.7 Transform inclusive scan">Transform inclusive scan</h1> <span style="float:right"><a href="n4698.html#parallel.alg.transform.inclusive.scan">[parallel.alg.transform.inclusive.scan]</a></span></header>
      
      

      <cxx-function id="parallel.alg.transform.inclusive.scan.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class InputIterator, class OutputIterator,
      class UnaryOperation,
      class BinaryOperation&gt;
OutputIterator transform_inclusive_scan(InputIterator first, InputIterator last,
                                        OutputIterator result,
                                        UnaryOperation unary_op,
                                        BinaryOperation binary_op);</cxx-signature><cxx-signature>template&lt;class InputIterator, class OutputIterator,
      class UnaryOperation,
      class BinaryOperation, class T&gt;
OutputIterator transform_inclusive_scan(InputIterator first, InputIterator last,
                                        OutputIterator result,
                                        UnaryOperation unary_op,
                                        BinaryOperation binary_op, T init);</cxx-signature></code></pre>

    <dl>
      
        

        

        <cxx-effects id="parallel.alg.transform.inclusive.scan.2" para_num="2">
    
    <dt>Effects:</dt><dd>
          Assigns through each iterator <code>i</code> in <code>[result,result + (last - first))</code> the value of
          <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, unary_op(*first), ..., unary_op(*(first + (i -</code><br>
          <code>result))))</code> or
          <code><em>GENERALIZED_NONCOMMUTATIVE_SUM</em>(binary_op, init, unary_op(*first), ..., unary_op(*(first + (i</code><br>
          <code>- result))))</code>
          if <code>init</code> is provided.
        </dd>
  </cxx-effects>

        <cxx-returns id="parallel.alg.transform.inclusive.scan.3" para_num="3">
    
    <dt>Returns:</dt><dd>
          The end of the resulting range beginning at <code>result</code>.
        </dd>
  </cxx-returns>

        <cxx-requires id="parallel.alg.transform.inclusive.scan.4" para_num="4">
    
    <dt>Requires:</dt><dd>
          Neither <code>unary_op</code> nor <code>binary_op</code> shall invalidate iterators or subranges, or modify elements in the ranges <code>[first,last)</code>
          or <code>[result,result + (last - first))</code>.
        </dd>
  </cxx-requires>

        <cxx-complexity id="parallel.alg.transform.inclusive.scan.5" para_num="5">
    
    <dt>Complexity:</dt><dd>
          O(<code>last - first</code>) applications each of <code>unary_op</code> and <code>binary_op</code>.
        </dd>
  </cxx-complexity>

        <cxx-notes id="parallel.alg.transform.inclusive.scan.6" para_num="6">
    
    <dt>Notes:</dt><dd>
          The difference between <code>transform_exclusive_scan</code> and <code>transform_inclusive_scan</code> is that <code>transform_inclusive_scan</code>
          includes the ith input element from the ith sum. If <code>binary_op</code> is not mathematically associative, the behavior of
          <code>transform_inclusive_scan</code> may be non-deterministic. <code>transform_inclusive_scan</code> does not apply <code>unary_op</code> to <code>init</code>.
        </dd>
  </cxx-notes>
      
    </dl>
  </cxx-function>
    
    </section>
  </cxx-section>
  
    </section>
  </cxx-section>

    </section>
  </cxx-clause>

<cxx-clause id="parallel.task_block">
    

    <section>
      <header><span class="section-number">8</span> <h1 data-bookmark-label="8 Task Block">Task Block</h1> <span style="float:right"><a href="n4698.html#parallel.task_block">[parallel.task_block]</a></span></header>
      
  

   <cxx-section id="parallel.task_block.synopsis">
    

    <section>
      <header><span class="section-number">8.1</span> <h1 data-bookmark-label="8.1 Header &lt;experimental/task_block&gt; synopsis">Header <code>&lt;experimental/task_block&gt;</code> synopsis</h1> <span style="float:right"><a href="n4698.html#parallel.task_block.synopsis">[parallel.task_block.synopsis]</a></span></header>
      
     

     <pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {
  class task_cancelled_exception;

  class task_block;

  template&lt;class F&gt;
    void define_task_block(F&amp;&amp; f);

  template&lt;class f&gt;
    void define_task_block_restore_thread(F&amp;&amp; f);
}
}
}
}
     </pre>
   
    </section>
  </cxx-section>

   <cxx-section id="parallel.task_block.task_cancelled_exception">
    

    <section>
      <header><span class="section-number">8.2</span> <h1 data-bookmark-label="8.2 Class task_cancelled_exception">Class <code>task_cancelled_exception</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.task_cancelled_exception">[parallel.task_block.task_cancelled_exception]</a></span></header>
      
     
     <pre>namespace std {
namespace experimental {
namespace parallel
inline namespace v2 {

  class task_cancelled_exception : public exception
  {
    public:
      task_cancelled_exception() noexcept;
      virtual const char* what() const noexcept;
  };
}
}
}
}
     </pre>

     <p id="parallel.task_block.task_cancelled_exception.1" para_num="1">
       The class <code>task_cancelled_exception</code> defines the type of objects thrown by
       <code>task_block::run</code> or <code>task_block::wait</code> if they detect than an
       exception is pending within the current parallel block. See <cxx-ref to="parallel.task_block.exceptions"><a title="parallel.task_block.exceptions" href="n4698.html#parallel.task_block.exceptions">8.5</a></cxx-ref>, below.
     </p>

     <cxx-section id="parallel.task_block.task_cancelled_exception.what">
    

    <section>
      <header><span class="section-number">8.2.1</span> <h1 data-bookmark-label="8.2.1 task_cancelled_exception member function what"><code>task_cancelled_exception</code> member function <code>what</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.task_cancelled_exception.what">[parallel.task_block.task_cancelled_exception.what]</a></span></header>
      
       

       <cxx-function id="parallel.task_block.task_cancelled_exception.what.1" para_num="1">
    
    <pre><code><cxx-signature>virtual const char* what() const noexcept</cxx-signature></code></pre>

    <dl>
      
         

         <cxx-returns id="parallel.task_block.task_cancelled_exception.what.2" para_num="2">
    
    <dt>Returns:</dt><dd>
           An implementation-defined NTBS.
         </dd>
  </cxx-returns>
       
    </dl>
  </cxx-function>
     
    </section>
  </cxx-section>
   
    </section>
  </cxx-section>

   <cxx-section id="parallel.task_block.class">
    

    <section>
      <header><span class="section-number">8.3</span> <h1 data-bookmark-label="8.3 Class task_block">Class <code>task_block</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.class">[parallel.task_block.class]</a></span></header>
      
     
     <pre>namespace std {
namespace experimental {
namespace parallel {
inline namespace v2 {

  class task_block
  {
    private:
      ~task_block();

    public:
      task_block(const task_block&amp;) = delete;
      task_block&amp; operator=(const task_block&amp;) = delete;
      void operator&amp;() const = delete;

      template&lt;class F&gt;
        void run(F&amp;&amp; f);

      void wait();
  };
}
}
}
}
     </pre>

     <p id="parallel.task_block.class.1" para_num="1">
       The class <code>task_block</code> defines an interface for forking and joining parallel tasks. The <code>define_task_block</code> and <code>define_task_block_restore_thread</code> function templates create an object of type <code>task_block</code> and pass a reference to that object to a user-provided function object.
     </p>

     <p id="parallel.task_block.class.2" para_num="2">
       An object of class <code>task_block</code> cannot be constructed,
 destroyed, copied, or moved except by the implementation of the task 
block library. Taking the address of a <code>task_block</code> object via <code>operator&amp;</code> is ill-formed. Obtaining its address by any other means (including <code>addressof</code>) results in a pointer with an unspecified value; dereferencing such a pointer results in undefined behavior.
     </p>

     <p id="parallel.task_block.class.3" para_num="3">
       A <code>task_block</code> is <em>active</em> if it was created by the nearest enclosing task block, where “task block” refers to an
       invocation of <code>define_task_block</code> or <code>define_task_block_restore_thread</code> and “nearest enclosing” means the most
       recent invocation that has not yet completed. Code designated for execution in another thread by means other
       than the facilities in this section (e.g., using <code>thread</code> or <code>async</code>) are not enclosed in the task block and a
       <code>task_block</code> passed to (or captured by) such code is not active within that code. Performing any operation on a
       <code>task_block</code> that is not active results in undefined behavior.
     </p>

     <p id="parallel.task_block.class.4" para_num="4">
       When the argument to <code>task_block::run</code> is called, no <code>task_block</code> is active, not even the <code>task_block</code> on which <code>run</code> was called.
       (The function object should not, therefore, capture a <code>task_block</code> from the surrounding block.)
     </p>

     <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    
     <pre>define_task_block([&amp;](auto&amp; tb) {
  tb.run([&amp;]{
    tb.run([] { f(); });               // Error: tb is not active within run
    define_task_block([&amp;](auto&amp; tb2) { // Define new task block
      tb2.run(f);
      ...
    });
  });
  ...
});
     </pre>
     
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example><pre></pre>

     <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    
       Implementations are encouraged to diagnose the above error at translation time.
     
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>

     <cxx-section id="parallel.task_block.class.run">
    

    <section>
      <header><span class="section-number">8.3.1</span> <h1 data-bookmark-label="8.3.1 task_block member function template run"><code>task_block</code> member function template <code>run</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.class.run">[parallel.task_block.class.run]</a></span></header>
      
     
       
  
       <cxx-function id="parallel.task_block.class.run.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class F&gt; void run(F&amp;&amp; f);</cxx-signature></code></pre>

    <dl>
      
         

         <cxx-requires id="parallel.task_block.class.run.2" para_num="2">
    
    <dt>Requires:</dt><dd>
           <code>F</code> shall be <code>MoveConstructible</code>. <code><em>DECAY_COPY</em>(std::forward&lt;F&gt;(f))()</code> shall be a valid expression.
         </dd>
  </cxx-requires>
  
         <cxx-preconditions id="parallel.task_block.class.run.3" para_num="3">
    
    <dt>Preconditions:</dt><dd>
           <code>*this</code> shall be the active <code>task_block</code>.
         </dd>
  </cxx-preconditions>
  
         <cxx-effects id="parallel.task_block.class.run.4" para_num="4">
    
    <dt>Effects:</dt><dd>
           Evaluates <code><em>DECAY_COPY</em>(std::forward&lt;F&gt;(f))()</code>, where <code><em>DECAY_COPY</em>(std::forward&lt;F&gt;(f))</code>
           is evaluated synchronously within the current thread. The call to the resulting copy of the function object is
           permitted to run on an unspecified thread created by the implementation in an unordered fashion relative to
           the sequence of operations following the call to <code>run(f)</code> (the continuation), or indeterminately sequenced
           within the same thread as the continuation. The call to <code>run</code> synchronizes with the call to the function
           object. The completion of the call to the function object synchronizes with the next invocation of <code>wait</code> on
           the same <code>task_block</code> or completion of the nearest enclosing task block (i.e., the <code>define_task_block</code> or
           <code>define_task_block_restore_thread</code> that created this <code>task_block</code>).
         </dd>
  </cxx-effects>
  
         <cxx-throws id="parallel.task_block.class.run.5" para_num="5">
    
    <dt>Throws:</dt><dd>
           <code>task_cancelled_exception</code>, as described in <cxx-ref to="parallel.task_block.exceptions"><a title="parallel.task_block.exceptions" href="n4698.html#parallel.task_block.exceptions">8.5</a></cxx-ref>.
         </dd>
  </cxx-throws>
  
         <cxx-remarks id="parallel.task_block.class.run.6" para_num="6">
    
    <dt>Remarks:</dt><dd>
           The <code>run</code> function may return on a thread other than the one on which it was called; in such cases,
           completion of the call to <code>run</code> synchronizes with the continuation.
           
           <cxx-note><span class="nowrap">[ <em>Note:</em></span>
     The return from <code>run</code> is ordered similarly to an ordinary function call in a single thread.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>
         </dd>
  </cxx-remarks>
  
         <cxx-remarks id="parallel.task_block.class.run.7" para_num="7">
    
    <dt>Remarks:</dt><dd>
           The invocation of the user-supplied function object <code>f</code> may be immediate or may be delayed until
           compute resources are available. <code>run</code> might or might not return before the invocation of <code>f</code> completes.
         </dd>
  </cxx-remarks>
  
       
    </dl>
  </cxx-function>
     
    </section>
  </cxx-section>

     <cxx-section id="parallel.task_block.class.wait">
    

    <section>
      <header><span class="section-number">8.3.2</span> <h1 data-bookmark-label="8.3.2 task_block member function wait"><code>task_block</code> member function <code>wait</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.class.wait">[parallel.task_block.class.wait]</a></span></header>
      

       

       <cxx-function id="parallel.task_block.class.wait.1" para_num="1">
    
    <pre><code><cxx-signature>void wait();</cxx-signature></code></pre>

    <dl>
      
         

         <cxx-preconditions id="parallel.task_block.class.wait.2" para_num="2">
    
    <dt>Preconditions:</dt><dd><code>*this</code> shall be the active <code>task_block</code>.</dd>
  </cxx-preconditions>

         <cxx-effects id="parallel.task_block.class.wait.3" para_num="3">
    
    <dt>Effects:</dt><dd>
           Blocks until the tasks spawned using this <code>task_block</code> have completed.
         </dd>
  </cxx-effects>

         <cxx-throws id="parallel.task_block.class.wait.4" para_num="4">
    
    <dt>Throws:</dt><dd>
           <code>task_cancelled_exception</code>, as described in <cxx-ref to="parallel.task_block.exceptions"><a title="parallel.task_block.exceptions" href="n4698.html#parallel.task_block.exceptions">8.5</a></cxx-ref>.
         </dd>
  </cxx-throws>

         <cxx-postconditions id="parallel.task_block.class.wait.5" para_num="5">
    
    <dt>Postconditions:</dt><dd>
           All tasks spawned by the nearest enclosing task block have completed.
         </dd>
  </cxx-postconditions>

         <cxx-remarks id="parallel.task_block.class.wait.6" para_num="6">
    
    <dt>Remarks:</dt><dd>
           The <code>wait</code> function may return on a thread other than the one on which it was called; in such cases, completion of the call to <code>wait</code> synchronizes with subsequent operations.
           
           <cxx-note><span class="nowrap">[ <em>Note:</em></span>
    The return from wait is ordered similarly to an ordinary function call in a single thread.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note>

           <cxx-example>
    
    <span class="nowrap">[ <em>Example:</em></span>
    <pre>define_task_block([&amp;](auto&amp; tb) {
  tb.run([&amp;]{ process(a, w, x); }); // Process a[w] through a[x]
  if (y &lt; x) tb.wait();             // Wait if overlap between [w,x) and [y,z)
  process(a, y, z);                 // Process a[y] through a[z]
});
</pre>
           
    <span class="nowrap">— <em>end example</em> ]</span>
  </cxx-example>
         </dd>
  </cxx-remarks>
       
    </dl>
  </cxx-function>
     
    </section>
  </cxx-section>
   
    </section>
  </cxx-section>

   <cxx-section id="parallel.task_block.define_task_block">
    

    <section>
      <header><span class="section-number">8.4</span> <h1 data-bookmark-label="8.4 Function template define_task_block">Function template <code>define_task_block</code></h1> <span style="float:right"><a href="n4698.html#parallel.task_block.define_task_block">[parallel.task_block.define_task_block]</a></span></header>
      
     

     <cxx-function id="parallel.task_block.define_task_block.1" para_num="1">
    
    <pre><code><cxx-signature>template&lt;class F&gt;
void define_task_block(F&amp;&amp; f);
       </cxx-signature><cxx-signature>template&lt;class F&gt;
void define_task_block_restore_thread(F&amp;&amp; f);
       </cxx-signature></code></pre>

    <dl>
      
       

       

       <cxx-requires id="parallel.task_block.define_task_block.2" para_num="2">
    
    <dt>Requires:</dt><dd>
         Given an lvalue <code>tb</code> of type <code>task_block</code>, the expression <code>f(tb)</code> shall be well-formed
       </dd>
  </cxx-requires>

       <cxx-effects id="parallel.task_block.define_task_block.3" para_num="3">
    
    <dt>Effects:</dt><dd>
         Constructs a <code>task_block</code> <code>tb</code> and calls <code>f(tb)</code>.
       </dd>
  </cxx-effects>

       <cxx-throws id="parallel.task_block.define_task_block.4" para_num="4">
    
    <dt>Throws:</dt><dd>
         <code>exception_list</code>, as specified in <cxx-ref to="parallel.task_block.exceptions"><a title="parallel.task_block.exceptions" href="n4698.html#parallel.task_block.exceptions">8.5</a></cxx-ref>.
       </dd>
  </cxx-throws>

       <cxx-postconditions id="parallel.task_block.define_task_block.5" para_num="5">
    
    <dt>Postconditions:</dt><dd>
         All tasks spawned from <code>f</code> have finished execution.
       </dd>
  </cxx-postconditions>

       <cxx-remarks id="parallel.task_block.define_task_block.6" para_num="6">
    
    <dt>Remarks:</dt><dd>
         The <code>define_task_block</code> function may return on a thread other than the one on which it was called
         unless there are no task blocks active on entry to <code>define_task_block</code> (see <cxx-ref to="parallel.task_block.class"><a title="parallel.task_block.class" href="n4698.html#parallel.task_block.class">8.3</a></cxx-ref>), in which
         case the function returns on the original thread. When <code>define_task_block</code> returns on a different thread,
         it synchronizes with operations following the call. <cxx-note><span class="nowrap">[ <em>Note:</em></span>
     The return from define_task_block is ordered
         similarly to an ordinary function call in a single thread.
    <span class="nowrap">— <em>end note</em> ]</span>
  </cxx-note> The <code>define_task_block_restore_thread</code>
         function always returns on the same thread as the one on which it was called.
       </dd>
  </cxx-remarks>

       <cxx-notes id="parallel.task_block.define_task_block.7" para_num="7">
    
    <dt>Notes:</dt><dd>
         It is expected (but not mandated) that <code>f</code> will (directly or indirectly) call <code>tb.run(<em>function-object</em>)</code>.
       </dd>
  </cxx-notes>
     
    </dl>
  </cxx-function>
   
    </section>
  </cxx-section>

   <cxx-section id="parallel.task_block.exceptions">
    

    <section>
      <header><span class="section-number">8.5</span> <h1 data-bookmark-label="8.5 Exception Handling">Exception Handling</h1> <span style="float:right"><a href="n4698.html#parallel.task_block.exceptions">[parallel.task_block.exceptions]</a></span></header>
      
     

     <p id="parallel.task_block.exceptions.1" para_num="1">
       Every <code>task_block</code> has an associated exception list. When the task block starts, its associated exception list is empty.
     </p>

     <p id="parallel.task_block.exceptions.2" para_num="2">
       When an exception is thrown from the user-provided function object passed to <code>define_task_block</code> or
       <code>define_task_block_restore_thread</code>, it is added to the exception list for that task block. Similarly, when
       an exception is thrown from the user-provided function object passed into <code>task_block::run</code>, the exception
       object is added to the exception list associated with the nearest enclosing task block. In both cases, an
       implementation may discard any pending tasks that have not yet been invoked. Tasks that are already in
       progress are not interrupted except at a call to <code>task_block::run</code> or <code>task_block::wait</code> as described below.
     </p>

     <p id="parallel.task_block.exceptions.3" para_num="3">
       If the implementation is able to detect that an exception has been thrown by another task within
       the same nearest enclosing task block, then <code>task_block::run</code> or <code>task_block::wait</code> may throw
       <code>task_canceled_exception</code>; these instances of <code>task_canceled_exception</code> are not added to the exception
       list of the corresponding task block.
     </p>

     <p id="parallel.task_block.exceptions.4" para_num="4">
       When a task block finishes with a non-empty exception list, the exceptions are aggregated into an <code>exception_list</code> object, which is then thrown from the task block.
     </p>

     <p id="parallel.task_block.exceptions.5" para_num="5">
       The order of the exceptions in the <code>exception_list</code> object is unspecified.
     </p>
   
    </section>
  </cxx-section>

    </section>
  </cxx-clause>






</body></html>